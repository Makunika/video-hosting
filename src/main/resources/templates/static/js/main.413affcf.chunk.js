(this["webpackJsonpvideo-hosting-front"]=this["webpackJsonpvideo-hosting-front"]||[]).push([[0],{256:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),i=a(14),s=a.n(i),o=(a(137),a(51)),l=a(169),u=a(310),j=a(121),d=a.n(j),b=a(11),h=a(304),O=a(9),m=a(127),p=a(38),x=a(317),f=a(355),v=a(308),g=a(312),y=a(156),k=a(260),w=a(17),S=a(161),C=a.n(S).a.create({baseURL:"/api/",responseType:"json"});C.interceptors.request.use((function(e){var t=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).token:"";return e.headers.Authorization=""!==t?"Bearer_".concat(t):"",e}));var N=C,I=a(72),P=a.n(I),W=a(307),E=a(261),T=a(313),U=a(314),R=a(315),L=a(316),D=a(311);var B=P()((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}));function A(e){var t=B(),a=Object(w.b)().enqueueSnackbar,i=Object(b.f)(),s=Object(r.useState)(e.list.map((function(e){return e.createDate=new Date(e.createDate),e})).sort((function(e,t){return new Date(t.createDate)-new Date(e.createDate)}))),o=Object(O.a)(s,2),l=o[0],u=o[1];return Object(n.jsx)(W.a,{className:t.root,subheader:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(D.a,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),Object(n.jsx)(g.a,{variant:"fullWidth"})]}),children:Array.prototype.map.call(l,(function(r,s){return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsxs)(E.a,{alignItems:"flex-start",children:[Object(n.jsx)(T.a,{children:Object(n.jsx)(f.a,{onClick:function(){return i.push("/user/"+r.user.id)},style:{cursor:"pointer"},children:r.user.name[0].toUpperCase()})}),Object(n.jsx)(U.a,{primary:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("div",{onClick:function(){return i.push("/user/"+r.user.id)},style:{cursor:"pointer",display:"inline"},children:r.user.name}),Object(n.jsx)(p.a,{component:"span",variant:"subtitle2",className:t.inline,color:"textSecondary",style:{marginLeft:15},children:new Date(r.createDate).toLocaleString()})]}),secondary:Object(n.jsx)(p.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary",children:r.text})}),e.isAdmin&&Object(n.jsx)(R.a,{children:Object(n.jsx)(L.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e,t){N.delete("/comments/"+e.id).then((function(e){var n=l.slice(),r=n.splice(t,1);u(n),a("\u041a\u043e\u043c\u043c\u0435\u043d\u0430\u0442\u0440\u0438\u0439 ".concat(r[0].text," \u0443\u0434\u0430\u043b\u0435\u043d"),{variant:"success"})}),(function(e){a("\u041a\u043e\u043c\u043c\u0435\u043d\u0430\u0442\u0440\u0438\u0439 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"warning"})}))}(r,s)},children:Object(n.jsx)(x.a,{})})})]}),s!==l.length-1&&Object(n.jsx)(g.a,{variant:"fullWidth"})]},s)}))})}var q=function(e){var t=e.userId,a=e.videoId,c=e.isAdmin,i=Object(w.b)().enqueueSnackbar,s=e.auth,o=Object(r.useState)([]),l=Object(O.a)(o,2),u=l[0],j=l[1],d=Object(r.useState)(!1),b=Object(O.a)(d,2),p=b[0],x=b[1],f=Object(r.useState)(""),g=Object(O.a)(f,2),S=g[0],C=g[1];function I(){x(!1),N.get("comments/video/"+a).then((function(e){console.log(e.data.data),j(e.data.data),x(!0)}),(function(e){console.log(e.data),i("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432",{variant:"error"}),x(!0)}))}return Object(r.useEffect)(I,[]),Object(n.jsx)(m.a,{children:Object(n.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",style:{paddingLeft:15,paddingRight:15},spacing:3,children:[s&&Object(n.jsxs)(h.a,{item:!0,xs:!0,children:[Object(n.jsx)(y.a,{variant:"outlined",margin:"normal",fullWidth:!0,multiline:!0,rowsMax:20,rows:4,onChange:function(e){C(e.target.value)},placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"text",value:S,autoComplete:"off"}),Object(n.jsx)(k.a,{color:"primary",variant:"outlined",onClick:function(){var e={text:S,video_id:a,user_id:t};N.post("comments",e).then((function(e){console.log(e.data.data),C(""),i("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d",{variant:"success"}),I()}),(function(e){console.log(e.data),i("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f",{variant:"error"})}))},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),Object(n.jsx)(h.a,{item:!0,xs:!0,children:p?Object(n.jsx)(A,{isAdmin:c,list:u}):Object(n.jsx)(v.a,{})})]})})},M=a(318),F=a(319),V=a(320),z=a(303),G=Object(z.a)({center:{width:"100%"}});var _=function(){var e=G();return Object(n.jsx)(M.a,{children:Object(n.jsx)(F.a,{children:Object(n.jsx)(V.a,{className:e.center})})})},J=a(321),H=Object(z.a)({add:{width:"100%",marginBottom:10},media:{height:140}});function Q(e){var t=H(),a=Object(b.f)();return Object(n.jsx)(M.a,{className:t.add,children:Object(n.jsx)(J.a,{onClick:function(){a.push("/video/"+e.item.id),a.go(0)},children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",children:e.item.name}),Object(n.jsx)(p.a,{gutterBottom:!0,variant:"body2",children:e.item.about}),Object(n.jsx)(p.a,{variant:"subtitle2",children:e.item.user.name})]})})})}var $=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(O.a)(i,2),o=s[0],l=s[1];Object(r.useEffect)((function(){N.get("/videos?size=5&sort=name,asc").then((function(e){console.log(e.data.content),l(e.data.content),c(!0)}),(function(e){var t=e.response;console.log(t)})).catch((function(){console.log("WOOOOW")}))}),[]);var u=Object(n.jsxs)("div",{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",color:"textSecondary",children:"\u0414\u0440\u0443\u0433\u0438\u0435 \u0432\u0438\u0434\u0435\u043e"}),Array.prototype.map.call(o,(function(e){return Object(n.jsx)(Q,{item:e})}))]});return a?u:Object(n.jsx)(_,{})},K=a(322),X=a(323),Y=a(324),Z=a(325),ee=a(24),te=a.n(ee),ae=a(45);function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(ae.a)(te.a.mark((function e(t,a){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),n=!1,t({type:"REQUEST_LOGIN"}),e.next=5,N.post("/auth",a).then((function(e){var a=e.data;if(console.log(a),a.username)return t({type:"LOGIN_SUCCESS",payload:a}),console.log(a),localStorage.setItem("currentUser",JSON.stringify(a)),void(n=!0);t({type:"LOGIN_ERROR",error:a.errors[0]}),console.log(a),n=!1}),(function(e){var a=e.response;t({type:"LOGIN_ERROR",error:a.data}),console.log(a),n=!1}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(ae.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),localStorage.removeItem("currentUser"),localStorage.removeItem("token");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){N.put("/auth/check","").then((function(){console.log("auth ok!")})).catch((function(t){console.log("auth error!"),e({type:"LOGOUT"}),localStorage.removeItem("currentUser"),localStorage.removeItem("token")}))}var oe=a(30);console.log(localStorage.getItem("currentUser"));var le={user:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):"",token:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).token:"",loading:!1,errorMessage:null};console.log(le);var ue=function(e,t){switch(t.type){case"REQUEST_LOGIN":return Object(oe.a)(Object(oe.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(oe.a)(Object(oe.a)({},e),{},{user:t.payload,token:t.payload.token,loading:!1});case"LOGOUT":return Object(oe.a)(Object(oe.a)({},e),{},{user:"",token:""});case"LOGIN_ERROR":return Object(oe.a)(Object(oe.a)({},e),{},{loading:!1,errorMessage:t.error});default:throw new Error("Unhandled action type: ".concat(t.type))}},je=c.a.createContext(),de=c.a.createContext();function be(){var e=c.a.useContext(je);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}function he(){var e=c.a.useContext(de);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}var Oe=function(e){var t=e.children,a=Object(r.useReducer)(ue,le),c=Object(O.a)(a,2),i=c[0],s=c[1];return Object(n.jsx)(je.Provider,{value:i,children:Object(n.jsx)(de.Provider,{value:s,children:t})})},me=a(326),pe=Object(z.a)({video:{width:"100%",outline:"none"}});var xe=function(e){var t=Object(r.useState)(e.videoToken),a=Object(O.a)(t,1)[0],i=be(),s=""!==i.token,o=pe(),l=Object(w.b)().enqueueSnackbar,u=Object(b.f)(),j=Object(r.useState)(!1),d=Object(O.a)(j,2),h=d[0],m=d[1],x=Object(r.useState)({id:0,video:"unknow",user:{id:0,name:"name",img:"img"}}),v=Object(O.a)(x,2),y=v[0],S=v[1],C=Object(r.useState)({likes:0,dislikes:0}),I=Object(O.a)(C,2),P=I[0],W=I[1],E=Object(r.useState)(0),T=Object(O.a)(E,2),U=T[0],R=T[1],D=Object(r.useState)(a),B=Object(O.a)(D,1)[0],A=Object(r.useState)(!1),q=Object(O.a)(A,2),V=q[0],z=q[1];function G(e){z(!0);var t={videoId:a,userId:i.user.id,mark:e};N.post("/marks/",t).then((function(e){var t=e.data.data;z(!1),W({likes:t.likes,dislikes:t.dislikes}),R(t.markOwner)}),(function(e){l("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043b\u0430\u0439\u043a\u0430",{variant:"error"}),z(!1),R(0),z(!1)}))}Object(r.useEffect)((function(){N.get("/videos/"+B).then((function(e){console.log(e.data.data),S(e.data.data),m(!0),z(!0),s?N.get("/marks/".concat(a,"/user/").concat(i.user.id)).then((function(e){var t=e.data.data;z(!1),W({likes:t.likes,dislikes:t.dislikes}),R(t.markOwner)}),(function(e){l("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043b\u0430\u0439\u043a\u043e\u0432",{variant:"error"})})):N.get("/marks/".concat(a)).then((function(e){var t=e.data.data;z(!1),W({likes:t.likes,dislikes:t.dislikes}),R(0)}),(function(e){l("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043b\u0430\u0439\u043a\u043e\u0432",{variant:"error"})}))}),(function(e){l("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",{variant:"error"})})).catch((function(){}))}),[]);var J=Object(n.jsxs)(M.a,{children:[Object(n.jsx)(K.a,{children:Object(n.jsx)("video",{className:o.video,controls:!0,children:Object(n.jsx)("source",{src:"http://localhost:8080/api/file/videos/"+y.video,type:"video/mp4"})})}),Object(n.jsx)(X.a,{title:y.name,subheader:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",children:y.views+" \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"}),Object(n.jsx)(p.a,{variant:"subtitle2",children:new Date(y.createDate).toLocaleDateString()}),y.isPrivate&&Object(n.jsx)(p.a,{variant:"subtitle2",children:"\u042d\u0442\u043e \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e"})]}),action:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(L.a,{color:1===U?"primary":"default",disabled:!s||V,onClick:function(){G(1===U?0:1)},children:Object(n.jsx)(Y.a,{})}),Object(n.jsx)(p.a,{variant:"subtitle2",style:{display:"inline"},color:"textSecondary",children:P.likes}),Object(n.jsx)(L.a,{color:-1===U?"primary":"default",disabled:!s||V,onClick:function(){G(-1===U?0:-1)},children:Object(n.jsx)(Z.a,{})}),Object(n.jsx)(p.a,{variant:"subtitle2",color:"textSecondary",style:{display:"inline"},children:P.dislikes})]})}),Object(n.jsx)(g.a,{variant:"middle"}),Object(n.jsx)(X.a,{avatar:Object(n.jsx)(f.a,{onClick:function(){return u.push("/user/"+y.user.id)},style:{cursor:"pointer"},children:y.user.name[0].toUpperCase()}),title:Object(n.jsx)("div",{onClick:function(){return u.push("/user/"+y.user.id)},style:{cursor:"pointer"},children:y.user.name})}),Object(n.jsx)(F.a,{children:Object(n.jsx)(p.a,{children:y.about})}),!0===i.user.isAdmin&&Object(n.jsx)(me.a,{children:Object(n.jsx)(k.a,{color:"secondary",onClick:function(){N.delete("videos/"+a).then((function(e){l("\u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",{variant:"success"}),u.push("/")}),(function(e){console.log(e),l("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438",{variant:"error"})}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"})})]});return h?J:Object(n.jsx)(_,{})};var fe=function(){var e=Object(b.h)().videoToken,t=he(),a=be(),c=""!==a.token;return Object(r.useEffect)((function(){return se(t)}),[]),Object(n.jsxs)(h.a,{container:!0,spacing:4,justify:"center",children:[Object(n.jsx)(h.a,{item:!0,lg:11,md:9,xs:12,children:Object(n.jsx)(xe,{videoToken:e})}),Object(n.jsx)(h.a,{item:!0,xs:12,md:6,lg:7,sm:7,children:Object(n.jsx)(q,{isAdmin:!0===a.user.isAdmin,videoId:e,userId:a.user.id,auth:c})}),Object(n.jsx)(h.a,{item:!0,xs:10,md:3,lg:4,sm:5,children:Object(n.jsx)($,{})})]})},ve=P()({card:{width:355},card_img:{width:"100%",minHeight:200,objectFit:"contain"}});function ge(e){var t=ve(),a=Object(b.f)();return Object(n.jsx)(h.a,{item:!0,xs:"auto",children:Object(n.jsx)(M.a,{className:t.card,children:Object(n.jsx)(J.a,{onClick:function(){return a.push("/video/"+e.item.id)},children:Object(n.jsxs)(F.a,{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"h5",children:e.item.name}),Object(n.jsx)(p.a,{variant:"subtitle2",children:"\u0410\u0432\u0442\u043e\u0440: "+e.item.user.name}),Object(n.jsx)(h.a,{container:!0,justify:"flex-end",wrap:"nowrap",alignItems:"center",spacing:1,children:Object(n.jsx)(h.a,{item:!0,children:Object(n.jsx)(p.a,{variant:"body2",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432: "+e.item.views})})})]})})})})}function ye(e){var t=e.videosData,a=e.handleNextPage,r=e.nextPage;return Object(n.jsxs)(h.a,{container:!0,spacing:4,justify:"flex-start",alignItems:"center",children:[0===t.length&&Object(n.jsx)(h.a,{container:!0,item:!0,xs:12,justify:"center",children:Object(n.jsx)(p.a,{variant:"h5",color:"textSecondary",children:"\u0412\u0438\u0434\u0435\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})}),0!==t.length&&Object(n.jsxs)(c.a.Fragment,{children:[Array.prototype.map.call(t,(function(e){return Object(n.jsx)(ge,{item:e},e.id)})),r&&Object(n.jsx)(h.a,{container:!0,item:!0,xs:12,justify:"center",children:Object(n.jsx)(k.a,{variant:"outlined",onClick:a,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})})]})]})}var ke=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),d=j[0],h=j[1],m=Object(r.useState)(!1),p=Object(O.a)(m,2),x=p[0],f=p[1],v=new URLSearchParams(Object(b.g)().search),g=Object(r.useState)(v.get("name")),y=Object(O.a)(g,1)[0],k=Object(r.useState)(v.get("sort")),w=Object(O.a)(k,1)[0];return Object(r.useEffect)((function(){var e=y?"/videos?page=".concat(d,"&name=").concat(y):w?"/videos?page=".concat(d,"&sort=views,desc"):"/videos?page=".concat(d);N.get(e).then((function(e){var t=o.slice();Array.prototype.map.call(e.data.content,(function(e){t.push(e)})),l(t),c(!0),f(d+1!==e.data.totalPages)}),(function(e){var t=e.response;console.log(t)})).catch((function(){console.log("WOOOOW")}))}),[d]),a?Object(n.jsx)(ye,{handleNextPage:function(){h(d+1)},nextPage:x,videosData:o}):Object(n.jsx)(_,{})};var we=function(){var e=he();return Object(r.useEffect)((function(){return se(e)}),[]),Object(n.jsx)(ke,{})},Se=a(168),Ce=a.n(Se),Ne=a(327),Ie=a(167),Pe=a(46),We=a(333),Ee=a(334),Te=a(330),Ue=a(329),Re=a(170),Le=a(125),De=a.n(Le),Be=a(163),Ae=a.n(Be),qe=a(331),Me=a(332),Fe=a(174),Ve=a(162),ze=a.n(Ve),Ge=a(108),_e=a(119),Je=a.n(_e),He=a(328),Qe=P()((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",maxWidth:400,background:"#ffa82b"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),$e=Object(l.a)({palette:{primary:Ge.a,secondary:Ge.a,info:Je.a}});function Ke(){var e=Qe(),t=new URLSearchParams(Object(b.g)().search),a=Object(r.useState)(t.get("name")?t.get("name"):""),c=Object(O.a)(a,2),i=c[0],s=c[1],o=Object(b.f)();return Object(n.jsx)(u.a,{theme:$e,children:Object(n.jsxs)(Ne.a,{component:"form",className:e.root,onSubmit:function(e){e.preventDefault(),i&&!/^\s*$/.test(i)?(o.push("/?name="+i),o.go(0)):s("")},children:[Object(n.jsx)(Fe.a,{className:e.input,placeholder:"\u041f\u043e\u0438\u0441\u043a",inputProps:{"aria-label":"\u041f\u043e\u0438\u0441\u043a"},onChange:function(e){s(e.target.value)},value:i}),Object(n.jsx)(L.a,{color:"inherit",type:"submit",className:e.iconButton,"aria-label":"search",children:Object(n.jsx)(ze.a,{})}),Object(n.jsx)(g.a,{className:e.divider,orientation:"vertical"}),Object(n.jsx)(L.a,{color:"inherit",className:e.iconButton,"aria-label":"directions",onClick:function(){o.push("/?sort=views"),window.location.reload()},children:Object(n.jsx)(He.a,{fontSize:"small"})})]})})}var Xe=Object(z.a)((function(e){var t,a;return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={display:"none"},Object(Pe.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(Pe.a)(t,"cursor","pointer"),t),titleOne:(a={display:"block"},Object(Pe.a)(a,e.breakpoints.up("sm"),{display:"none"}),Object(Pe.a)(a,"cursor","pointer"),a),search:Object(Pe.a)({marginRight:e.spacing(2),marginLeft:e.spacing(2),width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),sectionDesktop:Object(Pe.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(Pe.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function Ye(){var e=Xe(),t=he(),a=""!==be().token;Object(r.useEffect)((function(){return se(t)}),[]);var i=c.a.useState(null),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Boolean(o),j=Object(b.f)(),d=function(e){a?j.push("/profile"):j.push("/auth"),h()},h=function(){l(null)},m=function(){var e=Object(ae.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:h();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){a&&j.push("/new"),h()},f="primary-search-account-menu",v="primary-search-account-menu-mobile",g=Object(n.jsxs)(Re.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:v,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:h,children:[a&&Object(n.jsxs)(Ue.a,{onClick:x,children:[Object(n.jsx)(L.a,{color:"inherit",children:Object(n.jsx)(Te.a,{color:"secondary",children:Object(n.jsx)(qe.a,{})})}),Object(n.jsx)("p",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"})]}),Object(n.jsxs)(Ue.a,{onClick:d,children:[Object(n.jsx)(L.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(n.jsx)(De.a,{})}),Object(n.jsx)("p",{children:"Profile"})]}),a&&Object(n.jsxs)(Ue.a,{onClick:m,children:[Object(n.jsx)(L.a,{"aria-label":"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(n.jsx)(Me.a,{})}),Object(n.jsx)("p",{children:"Exit"})]})]});return Object(n.jsxs)("div",{className:e.grow,children:[Object(n.jsx)(We.a,{position:"static",children:Object(n.jsxs)(Ee.a,{children:[Object(n.jsx)(p.a,{className:e.title,variant:"h6",noWrap:!0,onClick:function(){var e="/"===window.location.pathname;j.push("/"),e&&j.go(0)},children:"Tronica"}),Object(n.jsx)(p.a,{className:e.titleOne,variant:"h5",onClick:function(){var e="/"===window.location.pathname;j.push("/"),e&&j.go(0)},children:"T"}),Object(n.jsx)("div",{className:e.search,children:Object(n.jsx)(Ke,{})}),Object(n.jsx)("div",{className:e.grow}),Object(n.jsxs)("div",{className:e.sectionDesktop,children:[a&&Object(n.jsx)(L.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0432\u0438\u0434\u0435\u043e",color:"inherit",onClick:x,children:Object(n.jsx)(Te.a,{color:"secondary",children:Object(n.jsx)(qe.a,{})})}),Object(n.jsx)(L.a,{"aria-label":"\u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442","aria-controls":f,"aria-haspopup":"true",onClick:d,color:"inherit",children:Object(n.jsx)(De.a,{})}),a&&Object(n.jsx)(L.a,{edge:"end","aria-label":"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430","aria-controls":f,"aria-haspopup":"true",onClick:m,color:"inherit",children:Object(n.jsx)(Me.a,{})})]}),Object(n.jsx)("div",{className:e.sectionMobile,children:Object(n.jsx)(L.a,{"aria-label":"show more","aria-controls":v,"aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit",children:Object(n.jsx)(Ae.a,{})})})]})}),g]})}var Ze=a(335),et=a(336),tt=a(337),at=a(338),nt=a(339),rt=a(340),ct=a(27),it=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},input:{WebkitBoxShadow:"0 0 0 1000px #303030 inset"}}}));function st(e){var t=it(),a=Object(b.f)(),c=Object(w.b)().enqueueSnackbar,i=Object(r.useState)(!1),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)({login:"",password:""}),j=Object(O.a)(u,2),d=j[0],m=j[1],x=he(),f=be().loading,v=function(){var e=Object(ae.a)(te.a.mark((function e(t){var n,r,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=d.login,r=d.password,e.next=6,ne(x,{username:n,password:r});case 6:i=e.sent,console.log("alo",i),i?(c("\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!",{variant:"success"}),a.push("/")):c("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c",{variant:"error"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t={password:d.password,login:d.login};t[e.target.name]=e.target.value,m(t)};return Object(n.jsxs)(Ne.a,{maxWidth:"sm",children:[Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(p.a,{component:"h1",variant:"h5",color:"textPrimary",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)(ct.ValidatorForm,{className:t.form,onSubmit:v,children:[Object(n.jsx)(ct.TextValidator,{variant:"outlined",margin:"normal",fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"username",autoFocus:!0,disabled:f,validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:d.login,onChange:g,inputProps:{className:t.input}}),Object(n.jsx)(ct.TextValidator,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",disabled:f,validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:d.password,onChange:g,inputProps:{className:t.input}}),Object(n.jsx)(k.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,type:"submit",disabled:f,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)(h.a,{container:!0,children:[Object(n.jsx)(h.a,{item:!0,xs:!0,children:Object(n.jsx)(Ze.a,{style:{cursor:"pointer"},variant:"body2",onClick:function(){l(!0)},children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),Object(n.jsx)(h.a,{item:!0,children:Object(n.jsx)(Ze.a,{style:{cursor:"pointer"},variant:"body2",onClick:function(){return e.handleLink()},children:"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]})]}),Object(n.jsx)(ot,{handleClose:function(){l(!1)},open:o})]})}function ot(e){var t=Object(w.b)().enqueueSnackbar,a=Object(r.useRef)(null),c=function(){var n=Object(ae.a)(te.a.mark((function n(){var r;return te.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={email:a.current.value},n.next=3,N.post("reset",r).then((function(e){t("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",{variant:"success"})}),(function(e){t("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",{variant:"error"})}));case 3:e.handleClose();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(n.jsxs)(et.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(tt.a,{id:"form-dialog-title",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(n.jsxs)(at.a,{children:[Object(n.jsx)(nt.a,{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443 \u0434\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(n.jsx)(y.a,{autoFocus:!0,margin:"dense",id:"name",inputRef:a,label:"Email",type:"email",autoComplete:"email",fullWidth:!0})]}),Object(n.jsxs)(rt.a,{children:[Object(n.jsx)(k.a,{onClick:e.handleClose,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(n.jsx)(k.a,{onClick:c,color:"primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}var lt=a(341),ut=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},input:{WebkitBoxShadow:"0 0 0 1000px #303030 inset"}}}));function jt(e){var t=ut(),a=Object(w.b)().enqueueSnackbar,c=Object(r.useState)({email:"",password:"",login:""}),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(O.a)(l,2),j=u[0],d=u[1],b=function(e){var t={email:s.email,password:s.password,login:s.login};t[e.target.name]=e.target.value,o(t)};return Object(n.jsxs)(Ne.a,{maxWidth:"sm",children:[Object(n.jsx)(lt.a,{}),Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(p.a,{component:"h1",variant:"h5",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsxs)(ct.ValidatorForm,{className:t.form,onSubmit:function(){d(!0);var t={username:s.login,email:s.email,password:s.password};N.post("register",t).then((function(t){d(!1),a("\u0412\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",{variant:"success"}),e.handleLink()}),(function(e){d(!1);var t=e.response.data;a(t.error,{variant:"error"}),console.log(t)}))},children:[Object(n.jsxs)(h.a,{container:!0,spacing:2,children:[Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(ct.TextValidator,{variant:"outlined",fullWidth:!0,onChange:b,label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"username",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:s.login,disabled:j,inputProps:{className:t.input}})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(ct.TextValidator,{variant:"outlined",fullWidth:!0,onChange:b,label:"Email",name:"email",autoComplete:"email",validators:["required","isEmail"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442"],value:s.email,disabled:j,inputProps:{className:t.input}})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(ct.TextValidator,{variant:"outlined",fullWidth:!0,onChange:b,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"new-password",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:s.password,disabled:j,inputProps:{className:t.input}})})]}),Object(n.jsx)(k.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:j,className:t.submit,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(n.jsx)(h.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(h.a,{item:!0,children:Object(n.jsx)(Ze.a,{style:{cursor:"pointer"},variant:"body2",onClick:function(){return e.handleLink()},children:"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? \u0412\u043e\u0439\u0442\u0438"})})})]})]})]})}var dt=function(){var e=Object(r.useState)(!0),t=Object(O.a)(e,2),a=t[0],i=t[1];function s(){i(!a)}return Object(n.jsx)(c.a.Fragment,{children:a?Object(n.jsx)(st,{handleLink:s}):Object(n.jsx)(jt,{handleLink:s})})},bt=a(262),ht=a(353);function Ot(e){return Object(n.jsxs)(ht.a,{position:"relative",display:"inline-flex",children:[Object(n.jsx)(v.a,Object(oe.a)({variant:"determinate"},e)),Object(n.jsx)(ht.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(n.jsx)(p.a,{variant:"caption",component:"div",children:"".concat(Math.round(e.value),"%")})})]})}var mt=Object(z.a)((function(e){return{input:{display:"none"},paper:{marginTop:e.spacing(3)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function pt(){var e=mt(),t=Object(w.b)().enqueueSnackbar,a=be(),i=c.a.useState(!1),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),d=j[0],b=j[1],m=Object(r.useState)({name:"",about:""}),p=Object(O.a)(m,2),x=p[0],f=p[1],v=function(e){var t={name:x.name,about:x.about};t[e.target.name]=e.target.value,f(t)},g=function(){var e=Object(ae.a)(te.a.mark((function e(){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),(n=new FormData).append("name",x.name),n.append("about",x.about),n.append("userId",a.user.id),n.append("isPrivate",!1),n.append("file",document.getElementById("icon-button-file").files[0]),e.next=9,N.post("file/videos",n,{onUploadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");console.log("onUploadProgress",t),null!==t&&b(Math.round(100*e.loaded/t))}}).then((function(e){console.log(e.data),l(!1),b(0)}),(function(e){console.log(e),t(e.response,{variant:"error"}),l(!1),b(0)})).catch((function(e){console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(Ne.a,{maxWidth:"sm",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(ct.ValidatorForm,{onSubmit:g,children:Object(n.jsxs)(h.a,{container:!0,spacing:3,justify:"center",children:[Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsx)("input",{accept:"video/mp4",className:e.input,id:"icon-button-file",type:"file"}),Object(n.jsx)("label",{htmlFor:"icon-button-file",children:Object(n.jsx)(k.a,{component:"span",color:"primary",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"})})]}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(ct.TextValidator,{variant:"standard",fullWidth:!0,onChange:v,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",autoComplete:"off",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:x.name})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(y.a,{variant:"standard",fullWidth:!0,multiline:!0,rowsMax:20,rows:4,onChange:v,label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"about",autoComplete:"off"})}),Object(n.jsx)(h.a,{item:!0,xs:12,lg:5,children:Object(n.jsx)(k.a,{fullWidth:!0,variant:"outlined",color:"primary",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})}),Object(n.jsx)(bt.a,{className:e.backdrop,open:o,children:Object(n.jsx)(Ot,{value:d})})]})})}var xt=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},font:{fontSize:50}}}));var ft=function(){var e=xt(),t=he();return be().token,Object(r.useEffect)((function(){return se(t)}),[]),Object(n.jsx)(Ne.a,{maxWidth:"sm",children:Object(n.jsx)("div",{className:e.paper,children:Object(n.jsx)(p.a,{component:"h1",variant:"h1",className:e.font,color:"textPrimary",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})})},vt=a(346),gt=a(347),yt=a(344),kt=a(345),wt=a(342),St=a(352),Ct=a(343),Nt=a(356),It=a(166),Pt=a.n(It),Wt=a(165),Et=a.n(Wt),Tt=a(357),Ut=a(348);function Rt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Lt(e,t){return"desc"===e?function(e,a){return Rt(e,a,t)}:function(e,a){return-Rt(e,a,t)}}function Dt(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var Bt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},{id:"views",numeric:!0,disablePadding:!1,label:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b"},{id:"likes",numeric:!0,disablePadding:!1,label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u0430\u0439\u043a\u043e\u0432"},{id:"dislikes",numeric:!0,disablePadding:!1,label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0438\u0437\u043b\u0430\u0439\u043a\u043e\u0432"}];function At(e){var t=e.classes,a=e.order,r=e.orderBy,c=e.onRequestSort;return Object(n.jsx)(wt.a,{children:Object(n.jsxs)(Ct.a,{children:[Bt.map((function(e){return Object(n.jsx)(yt.a,{align:e.numeric?"right":"left",sortDirection:r===e.id&&a,children:Object(n.jsxs)(Nt.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(i=e.id,function(e){c(e,i)}),children:[e.label,r===e.id?Object(n.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var i})),Object(n.jsx)(yt.a,{align:"right",children:"\u0422\u0438\u043f"}),Object(n.jsx)(yt.a,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})})}var qt=Object(z.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Mt(){var e=qt(),t=Object(r.useState)("asc"),a=Object(O.a)(t,2),c=a[0],i=a[1],s=Object(r.useState)("calories"),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)(0),d=Object(O.a)(j,2),h=d[0],p=d[1],x=Object(r.useState)([]),f=Object(O.a)(x,2),v=f[0],g=f[1],y=Object(r.useState)(!1),k=Object(O.a)(y,2),S=k[0],C=k[1],I=Object(r.useState)({name:"",id:0,about:"",isPrivate:!1}),P=Object(O.a)(I,2),W=P[0],E=P[1],T=be(),U=Object(w.b)().enqueueSnackbar,R=Object(b.f)();function D(){N.get("videos/user/"+T.user.id).then((function(e){console.log(e.data.data);var t=[];Array.prototype.map.call(e.data.data,(function(e){var a,n,r,c,i,s,o;t.push((a=e.id,n=e.name,r=e.views,c=e.likes,i=e.dislikes,s=e.about,o=e.isPrivate,{id:a,name:n,views:r,likes:c,dislikes:i,about:s,isPrivate:o}))})),g(t)}),(function(e){console.log(e),U("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",{variant:"error"})}))}Object(r.useEffect)((function(){D()}),[]);var B=8-Math.min(8,v.length-8*h);function A(){C(!1),D()}return Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsxs)(m.a,{className:e.paper,children:[Object(n.jsx)(kt.a,{children:Object(n.jsxs)(vt.a,{className:e.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",children:[Object(n.jsx)(At,{classes:e,order:c,orderBy:l,onRequestSort:function(e,t){i(l===t&&"asc"===c?"desc":"asc"),u(t)},rowCount:v.length}),Object(n.jsxs)(gt.a,{children:[Dt(v,Lt(c,l)).slice(8*h,8*h+8).map((function(e,t){return Object(n.jsxs)(Ct.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(n.jsx)(yt.a,{style:{cursor:"pointer"},onClick:function(){R.push("/video/"+e.id)},children:e.name}),Object(n.jsx)(yt.a,{align:"right",children:e.views}),Object(n.jsx)(yt.a,{align:"right",children:e.likes}),Object(n.jsx)(yt.a,{align:"right",children:e.dislikes}),Object(n.jsx)(yt.a,{align:"right",children:!1===e.isPrivate?"\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0435":"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435"}),Object(n.jsxs)(yt.a,{children:[Object(n.jsx)(L.a,{size:"small",onClick:function(){!function(e){E(e),C(!0)}(e)},children:Object(n.jsx)(Et.a,{})}),Object(n.jsx)(L.a,{size:"small",onClick:function(){var t;t=e.id,N.delete("videos/"+t).then((function(e){U("\u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",{variant:"success"}),D()}),(function(e){console.log(e),U("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438",{variant:"error"})}))},children:Object(n.jsx)(Pt.a,{})})]})]},e.id)})),B>0&&Object(n.jsx)(Ct.a,{style:{height:53*B},children:Object(n.jsx)(yt.a,{colSpan:6})})]})]})}),Object(n.jsx)(St.a,{rowsPerPageOptions:8,component:"div",count:v.length,rowsPerPage:8,page:h,onChangePage:function(e,t){p(t)}})]}),Object(n.jsx)(Ft,{handleClose:A,open:S,row:W,handleChangeInput:function(e){W[e.target.name]=e.target.value,E(Object(oe.a)({},W))},handlePrivate:function(){W.isPrivate=!W.isPrivate,E(Object(oe.a)({},W)),console.log(W)},handleButton:function(){console.log(W),N.put("/videos/".concat(W.id),W).then((function(e){U("\u0423\u0441\u043f\u0435\u0448\u043d\u043e",{variant:"success"}),A()}),(function(e){U("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c",{variant:"error"}),A()}))}})]})}function Ft(e){return Object(n.jsxs)(et.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(tt.a,{id:"form-dialog-title",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0438\u0434\u0435\u043e '"+e.row.name+"'"}),Object(n.jsxs)(at.a,{children:[Object(n.jsx)(nt.a,{children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439 \u0432\u0438\u0434\u0435\u043e"}),Object(n.jsx)(y.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",fullWidth:!0,onChange:e.handleChangeInput,name:"name",style:{marginBottom:10},value:e.row.name}),Object(n.jsx)(g.a,{variant:"fullWidth",style:{marginBottom:10}}),Object(n.jsx)(y.a,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",variant:"outlined",fullWidth:!0,onChange:e.handleChangeInput,name:"about",multiline:!0,rowsMax:10,value:e.row.about}),Object(n.jsx)(Ut.a,{control:Object(n.jsx)(Tt.a,{checked:e.row.isPrivate,onChange:e.handlePrivate,name:"privateVideo"}),label:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e"})]}),Object(n.jsxs)(rt.a,{children:[Object(n.jsx)(k.a,{onClick:e.handleClose,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(n.jsx)(k.a,{onClick:e.handleButton,color:"primary",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}var Vt=a(349),zt=Object(z.a)((function(e){return{input:{display:"none"},flex:{display:"flex",alignItems:"center",justifyContent:"space-around"}}}));function Gt(){var e=zt(),t=be(),a=he(),c=Object(w.b)().enqueueSnackbar,i=Object(r.useState)({email:"",password:"",username:t.user.username}),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(!1),j=Object(O.a)(u,2),d=j[0],b=j[1];return Object(n.jsx)(Ne.a,{maxWidth:"sm",children:Object(n.jsx)("div",{className:e.paper,children:Object(n.jsx)(ct.ValidatorForm,{onSubmit:function(){b(!0),N.put("users",o).then((function(e){console.log(e),function(e,t){e({type:"LOGIN_SUCCESS",payload:t}),localStorage.setItem("currentUser",JSON.stringify(t))}(a,e.data.data),c("\u041b\u043e\u0433\u0438\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d",{variant:"success"}),b(!1)}),(function(e){console.log(e),b(!1)}))},children:Object(n.jsxs)(h.a,{container:!0,spacing:3,justify:"center",children:[Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsxs)("div",{className:e.flex,children:[Object(n.jsx)(f.a,{children:"A"}),Object(n.jsx)("input",{accept:"image/*",className:e.input,id:"icon-button-file",type:"file"}),Object(n.jsx)("label",{htmlFor:"icon-button-file",children:Object(n.jsx)(L.a,{color:"primary",size:"small","aria-label":"upload picture",component:"span",children:Object(n.jsx)(Vt.a,{})})})]})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(ct.TextValidator,{varint:"standard",fullWidth:!0,onChange:function(e){var t={email:o.email,password:o.password,username:o.username};t[e.target.name]=e.target.value,console.log(t),l(t)},label:"\u041b\u043e\u0433\u0438\u043d",name:"username",autoComplete:"off",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:o.username,disabled:d})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(y.a,{varint:"standard",fullWidth:!0,label:"Email",name:"email",disabled:!0,value:t.user.email})}),Object(n.jsx)(h.a,{item:!0,xs:12,lg:5,children:Object(n.jsx)(k.a,{fullWidth:!0,variant:"outlined",color:"primary",type:"submit",disabled:d,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})})})}var _t=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(2)},headers:{marginBottom:e.spacing(2)},addVideo:{marginBottom:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between"}}}));function Jt(){var e=_t(),t=he(),a=Object(b.f)();return Object(r.useEffect)((function(){return se(t)}),[]),Object(n.jsx)(Ne.a,{maxWidth:"lg",children:Object(n.jsxs)(h.a,{container:!0,className:e.paper,spacing:4,children:[Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsx)(p.a,{variant:"h4",className:e.headers,color:"textPrimary",children:"\u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(n.jsx)(Gt,{})]}),Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsxs)("div",{className:e.addVideo,children:[Object(n.jsx)(p.a,{variant:"h4",color:"textPrimary",children:"\u0412\u0430\u0448\u0438 \u0432\u0438\u0434\u0435\u043e"}),Object(n.jsx)(k.a,{color:"primary",variant:"text",onClick:function(){return a.push("/new")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"})]}),Object(n.jsx)(Mt,{})]})]})})}var Ht=Object(z.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Qt(){var e=new URLSearchParams(Object(b.g)().search),t=Object(w.b)().enqueueSnackbar,a=Object(b.f)(),c=Ht(),i=Object(r.useRef)(null),s=Object(r.useState)(!1),o=Object(O.a)(s,2),l=o[0],u=o[1];return Object(n.jsxs)(Ne.a,{maxWidth:"sm",children:[Object(n.jsx)(lt.a,{}),Object(n.jsxs)("div",{className:c.paper,children:[Object(n.jsx)(p.a,{component:"h1",variant:"h5",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(n.jsxs)("form",{className:c.form,noValidate:!0,children:[Object(n.jsx)(y.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"new-password",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"new-password",disabled:l,inputRef:i}),Object(n.jsx)(k.a,{fullWidth:!0,variant:"contained",color:"primary",className:c.submit,onClick:function(){u(!0);var n={id:e.get("id"),token:e.get("token"),newPassword:i.current.value};N.put("/reset",n).then((function(e){u(!1),t("\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d",{variant:"success"}),a.push("/auth")}),(function(e){e=e.response,t(e.error,{variant:"error"}),u(!1)}))},disabled:l,children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})}var $t=a(350),Kt=a(172);function Xt(){var e=Object(b.h)().userId,t=Object(w.b)().enqueueSnackbar,a=he(),c=be(),i=Object(b.f)(),s=Object(r.useState)([]),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)({id:0,name:"name",isAdmin:!1,img:"asd"}),d=Object(O.a)(j,2),m=d[0],x=d[1],v=Object(r.useState)(!0),y=Object(O.a)(v,2),S=y[0],C=y[1];function I(){C(!0),N.get("users/"+e).then((function(e){x(e.data.data),t("\u0414\u0430\u043d\u043d\u044b\u0435 \u044e\u0437\u0435\u0440\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b",{variant:"info"}),C(!1)}),(function(e){t("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",{variant:"error"})}))}Object(r.useEffect)((function(){return se(a)}),[]),Object(r.useEffect)((function(){N.get("videos/user/"+e).then((function(e){var a=[];Array.prototype.map.call(e.data.data,(function(e){a.push(e)})),u(a),t("\u0412\u0438\u0434\u0435\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b",{variant:"info"}),I()}),(function(e){console.log(e),t("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",{variant:"error"})}))}),[]);var P=Object(n.jsx)(Ne.a,{maxWidth:"lg",style:{marginTop:40},children:Object(n.jsxs)(h.a,{container:!0,spacing:4,direction:"column",justify:"flex-start",alignItems:"center",children:[Object(n.jsxs)(h.a,{item:!0,container:!0,spacing:3,xs:12,justify:"flex-end",alignItems:"center",children:[Object(n.jsxs)(h.a,{item:!0,container:!0,spacing:3,xs:8,justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(f.a,{style:{marginRight:25},children:m.name[0].toUpperCase()}),Object(n.jsx)(p.a,{variant:"h6",color:"textPrimary",children:m.name})]}),!0===c.user.isAdmin&&Object(n.jsx)(h.a,{item:!0,xs:4,children:Object(n.jsxs)($t.a,{variant:"outlined",size:"small",color:"secondary",children:[Object(n.jsx)(k.a,{onClick:function(){var a={userId:e,isAdmin:!m.isAdmin};console.log(a),N.put("users/admin",a).then((function(e){t("\u0420\u043e\u043b\u044c \u0438\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c",{variant:"info"}),I()}),(function(){t("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043c\u0435\u043d\u0435 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",{variant:"error"})}))},children:m.isAdmin?"\u0423\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430":"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c"}),Object(n.jsx)(k.a,{onClick:function(){N.delete("users/"+e).then((function(a){t("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 id = "+e+" \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"info"}),i.push("/")}),(function(){t("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",{variant:"error"})}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})]}),Object(n.jsx)(h.a,{item:!0,sx:12,children:Object(n.jsx)(g.a,{variant:"fullWidth"})}),Object(n.jsxs)(h.a,{item:!0,xs:12,container:!0,justify:"flex-start",children:[Object(n.jsx)(p.a,{variant:"h6",color:"textPrimary",children:"\u0412\u0438\u0434\u0435\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(n.jsx)(g.a,{variant:"fullWidth"})]}),Object(n.jsx)(g.a,{variant:"fullWidth",color:"#ffffff"}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(Kt.a,{children:Object(n.jsx)(ye,{handleNextPage:function(){},nextPage:!1,videosData:l})})})]})});return S?Object(n.jsx)(_,{}):P}var Yt=a(120),Zt=a.n(Yt),ea=Object(l.a)({palette:{primary:d.a,secondary:Zt.a,type:"dark",text:{primary:"#ffffff",secondary:"#b8b8b8"}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}},Ie.ruRU),ta=Ce()({root:{marginTop:12}})(Ne.a);function aa(){var e=""!==be().token;return Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{path:"/video/:videoToken",children:Object(n.jsx)(fe,{})}),Object(n.jsx)(b.a,{exact:!0,path:"/",children:Object(n.jsx)(we,{})}),!e&&Object(n.jsx)(b.a,{path:"/auth",children:Object(n.jsx)(dt,{})}),!e&&Object(n.jsx)(b.a,{path:"/reset",children:Object(n.jsx)(Qt,{})}),e&&Object(n.jsx)(b.a,{path:"/profile",children:Object(n.jsx)(Jt,{})}),e&&Object(n.jsx)(b.a,{path:"/new",children:Object(n.jsx)(pt,{})}),e&&Object(n.jsx)(b.a,{path:"/user/:userId",children:Object(n.jsx)(Xt,{})}),Object(n.jsx)(b.a,{children:Object(n.jsx)(ft,{})})]})}var na=function(){return Object(n.jsx)(Oe,{children:Object(n.jsx)(u.a,{theme:ea,children:Object(n.jsxs)(w.a,{maxSnack:3,children:[Object(n.jsx)(Ye,{}),Object(n.jsx)(ta,{maxWidth:"lg",children:Object(n.jsx)(aa,{})})]})})})};s.a.render(Object(n.jsx)(o.a,{children:Object(n.jsx)(na,{})}),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.413affcf.chunk.js.map
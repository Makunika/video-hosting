{"version":3,"sources":["utils/API.js","layouts/video/CardCommentsLayout.js","components/Loading.js","components/CardVideoWithAbout.js","layouts/VerticalPanelCardsVideosLayout.js","context/actions.js","context/reducer.js","context/context.js","layouts/video/CardVideoLayout.js","pages/VideoPage.js","components/CardVideoWithViews.js","layouts/PanelCardsVideosLayout.js","layouts/home/HomeVideosLayout.js","pages/HomePage.js","components/CustomSearch.js","layouts/AppBar.js","layouts/auth/LoginLayout.js","layouts/auth/RegisterLayout.js","pages/AuthPage.js","pages/NewVideoPage.js","pages/NotFoundPage.js","layouts/profile/TableVideosLayout.js","layouts/profile/EditProfileLayout.js","pages/ProfilePage.js","pages/ResetPasswordPage.js","pages/UserPage.js","App.js","index.js"],"names":["API","axios","create","baseURL","responseType","interceptors","request","use","config","token","localStorage","getItem","JSON","parse","headers","Authorization","useStyles","makeStyles","theme","root","width","backgroundColor","palette","background","paper","inline","display","ListComments","props","classes","enqueueSnackbar","useSnackbar","history","useHistory","useState","list","map","item","createDate","Date","sort","a","b","setList","List","className","subheader","Fragment","ListSubheader","Divider","variant","Array","prototype","call","index","ListItem","alignItems","ListItemAvatar","Avatar","onClick","push","user","id","style","cursor","name","toUpperCase","ListItemText","primary","Typography","component","color","marginLeft","toLocaleString","secondary","text","isAdmin","ListItemSecondaryAction","IconButton","edge","aria-label","delete","then","res","l","slice","removed","splice","error","deleteComment","Delete","length","CardCommentsLayout","userId","videoId","auth","loading","setLoading","setText","loadComments","get","response","console","log","data","useEffect","Paper","Grid","container","direction","justify","paddingLeft","paddingRight","spacing","xs","TextField","margin","fullWidth","multiline","rowsMax","rows","onChange","e","target","value","placeholder","autoComplete","Button","createCommentData","video_id","user_id","post","CircularProgress","center","Loading","Card","CardContent","LinearProgress","add","marginBottom","media","height","CardVideoWithAbout","CardActionArea","go","gutterBottom","about","VerticalPanelCardsVideosLayout","isLoaded","setIsLoaded","videosData","setVideosData","content","catch","Videos","loginUser","dispatch","loginPayload","ok","type","username","payload","setItem","stringify","errors","logout","removeItem","checkAuth","put","initialState","errorMessage","AuthReducer","action","Error","AuthStateContext","React","createContext","AuthDispatchContext","useAuthState","context","useContext","undefined","useAuthDispatch","AuthProvider","children","useReducer","Provider","video","outline","CardVideoLayout","videoToken","userDetails","img","videoData","setVideoData","likes","dislikes","mark","setMark","like","setLike","markLoad","setMarkLoad","changeMark","markOwner","Video","CardMedia","controls","src","CardHeader","title","views","toLocaleDateString","isPrivate","disabled","ThumbUp","ThumbDown","avatar","CardActions","VideoPage","useParams","lg","md","sm","card","card_img","minHeight","objectFit","CardVideoWithViews","wrap","PanelCardsVideosLayout","handleNextPage","nextPage","HomeVideosLayout","page","setPage","next","setNext","query","URLSearchParams","useLocation","search","url","v","totalPages","HomePage","padding","maxWidth","input","flex","iconButton","divider","innerTheme","createMuiTheme","orange","info","grey","CustomizedSearch","str","setStr","ThemeProvider","Container","onSubmit","event","preventDefault","test","InputBase","inputProps","orientation","window","location","reload","Star","fontSize","grow","flexGrow","menuButton","marginRight","breakpoints","up","titleOne","sectionDesktop","sectionMobile","PrimarySearchAppBar","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMobileMenuOpen","Boolean","handleProfileMenuOpen","handleMobileMenuClose","handleExit","handleNewVideo","menuId","mobileMenuId","renderMobileMenu","Menu","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","onClose","MenuItem","Badge","VideoCall","aria-controls","aria-haspopup","ExitToApp","AppBar","position","Toolbar","noWrap","pathname","currentTarget","marginTop","flexDirection","main","form","submit","WebkitBoxShadow","LoginLayout","setOpen","login","password","formData","setFormData","handleLogin","handleChange","formData1","label","autoFocus","validators","errorMessages","Link","handleLink","ResetPassword","handleClose","emailRef","useRef","handleButton","email","current","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","inputRef","DialogActions","RegisterLayout","CssBaseline","AuthPage","setLogin","CircularProgressWithLabel","Box","top","left","bottom","right","justifyContent","Math","round","userStyle","backdrop","zIndex","drawer","NewVideoPage","load","setLoad","progress","setProgress","f","FormData","append","document","getElementById","files","onUploadProgress","progressEvent","totalLength","lengthComputable","total","getResponseHeader","loaded","accept","htmlFor","Backdrop","font","NotFoundPage","descendingComparator","orderBy","getComparator","order","stableSort","array","comparator","stabilizedThis","el","headCells","numeric","disablePadding","EnhancedTableHead","onRequestSort","TableHead","TableRow","headCell","TableCell","align","sortDirection","TableSortLabel","active","property","visuallyHidden","table","minWidth","border","clip","overflow","TableVideosLayout","setOrder","setOrderBy","setRows","currentRow","setCurrentRow","loadRows","r","emptyRows","min","closeEditVideo","TableContainer","Table","size","rowCount","TableBody","row","hover","role","tabIndex","openEditVideo","colSpan","TablePagination","rowsPerPageOptions","count","rowsPerPage","onChangePage","newPage","EditVideo","handleChangeInput","handlePrivate","FormControlLabel","control","Switch","checked","useStyle","EditProfileLayout","changeUsername","PhotoCamera","varint","addVideo","ProfilePage","ResetPasswordPage","passwordRef","noValidate","newPassword","UserPage","userData","setUserData","loadUserData","ButtonGroup","sx","Fade","pink","values","xl","locales","StyledContainer","withStyles","Routing","path","exact","App","maxSnack","ReactDOM","render"],"mappings":"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","file":"static/js/main.290e561b.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst API =  axios.create({\r\n    baseURL: \"/api/\",\r\n    responseType: \"json\"\r\n});\r\n\r\nAPI.interceptors.request.use(function (config) {\r\n    const token = localStorage.getItem('currentUser')\r\n        ? JSON.parse(localStorage.getItem('currentUser')).token\r\n        : '';\r\n    config.headers.Authorization =  token !== '' ? `Bearer_${token}` : '';\r\n    return config;\r\n});\r\n\r\nexport default API;","import Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {Delete} from \"@material-ui/icons\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport API from \"../../utils/API\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\r\nimport {useHistory} from \"react-router\";\r\n\r\n\r\nfunction CardCommentsLayout(props) {\r\n    const userId = props.userId;\r\n    const videoId = props.videoId;\r\n    const isAdmin = props.isAdmin;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const auth = props.auth;\r\n    const [list, setList] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [text, setText] = useState(\"\");\r\n\r\n    function loadComments() {\r\n        setLoading(false);\r\n\r\n        API.get(\"comments/video/\" + videoId)\r\n            .then((response) => {\r\n                console.log(response.data.data);\r\n                setList(response.data.data);\r\n                setLoading(true);\r\n            }, (error) => {\r\n                console.log(error.data);\r\n                enqueueSnackbar(\"Ошибка при загрузки комментариев\", {variant: \"error\"});\r\n                setLoading(true);\r\n            })\r\n\r\n    }\r\n\r\n    function handleChange(e) {\r\n        setText(e.target.value);\r\n    }\r\n\r\n    function handleCreateComment() {\r\n        const createCommentData = {\r\n            text: text,\r\n            video_id: videoId,\r\n            user_id: userId\r\n        }\r\n\r\n        API.post(\"comments\", createCommentData)\r\n            .then(\r\n                (response) => {\r\n                    console.log(response.data.data)\r\n                    setText(\"\");\r\n                    enqueueSnackbar(\"Комментарий успешно создан\", {variant: \"success\"});\r\n                    loadComments();\r\n                },\r\n                (error) => {\r\n                    console.log(error.data);\r\n                    enqueueSnackbar(\"Ошибка при создании комментария\", {variant: \"error\"});\r\n                });\r\n    }\r\n\r\n    useEffect(loadComments, []);\r\n\r\n    return (\r\n        <Paper>\r\n            <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"stretch\"\r\n                style={{paddingLeft: 15, paddingRight: 15}}\r\n                spacing={3}\r\n            >\r\n                {auth &&\r\n                <Grid item xs >\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        fullWidth={true}\r\n                        multiline\r\n                        rowsMax={20}\r\n                        rows={4}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Напишите комментарий\"\r\n                        name=\"text\"\r\n                        value={text}\r\n                        autoComplete=\"off\"\r\n                    />\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant=\"outlined\"\r\n                        onClick={handleCreateComment}\r\n                    >\r\n                        Отправить\r\n                    </Button>\r\n                </Grid>\r\n                }\r\n                <Grid item xs  >\r\n                    { loading ? <ListComments isAdmin={isAdmin} list={list}  /> : <CircularProgress /> }\r\n                </Grid>\r\n            </Grid>\r\n        </Paper>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        backgroundColor: theme.palette.background.paper,\r\n    },\r\n    inline: {\r\n        display: 'inline',\r\n    },\r\n}));\r\n\r\nfunction ListComments(props) {\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n    const [list, setList] = useState(props.list.map((item) => {\r\n        item.createDate = new Date(item.createDate);\r\n        return item;\r\n    }).sort((a, b) => {\r\n        return new Date(b.createDate) - new Date(a.createDate);\r\n    }));\r\n\r\n    function deleteComment(item, index) {\r\n        API.delete(\"/comments/\" + item.id)\r\n            .then((res) => {\r\n                const l = list.slice();\r\n                const removed = l.splice(index, 1);\r\n                setList(l);\r\n                enqueueSnackbar(`Комменатрий ${removed[0].text} удален`, { variant: \"success\" });\r\n            },\r\n                (error) => {\r\n                enqueueSnackbar(\"Комменатрий не может быть удален\", { variant: \"warning\" });\r\n            })\r\n    }\r\n\r\n    return (\r\n        <List className={classes.root} subheader={\r\n            <React.Fragment>\r\n                <ListSubheader>Комментарии</ListSubheader>\r\n                <Divider variant=\"fullWidth\" />\r\n            </React.Fragment>\r\n        }>\r\n            {\r\n                Array.prototype.map.call(list, function (item, index) {\r\n                    return (\r\n                        <React.Fragment key={index}>\r\n                        <ListItem alignItems=\"flex-start\">\r\n                            <ListItemAvatar>\r\n                                <Avatar onClick={() => history.push(\"/user/\" + item.user.id)} style={{cursor: 'pointer'}}>\r\n                                    {item.user.name[0].toUpperCase()}\r\n                                </Avatar>\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                                primary={\r\n                                    <React.Fragment>\r\n                                        <div onClick={() => history.push(\"/user/\" + item.user.id)} style={{cursor: 'pointer', display: 'inline'}}>\r\n                                            {item.user.name}\r\n                                        </div>\r\n                                        <Typography\r\n                                            component=\"span\"\r\n                                            variant=\"subtitle2\"\r\n                                            className={classes.inline}\r\n                                            color=\"textSecondary\"\r\n                                            style={{marginLeft:15}}\r\n                                        >\r\n                                            {new Date(item.createDate).toLocaleString()}\r\n                                        </Typography>\r\n                                    </React.Fragment>\r\n                                    }\r\n                                secondary={\r\n                                    <Typography\r\n                                        component=\"span\"\r\n                                        variant=\"body2\"\r\n                                        className={classes.inline}\r\n                                        color=\"textPrimary\"\r\n                                    >\r\n                                        {item.text}\r\n                                    </Typography>\r\n                                }\r\n                            />\r\n                            {props.isAdmin &&\r\n                            <ListItemSecondaryAction>\r\n                                <IconButton edge=\"end\" aria-label=\"delete\" onClick={() => deleteComment(item, index)}>\r\n                                    <Delete />\r\n                                </IconButton>\r\n                            </ListItemSecondaryAction> }\r\n                        </ListItem>\r\n                            {index !== list.length - 1 && <Divider variant=\"fullWidth\" />}\r\n                        </React.Fragment>\r\n                    )\r\n                })\r\n            }\r\n        </List>\r\n    )\r\n}\r\n\r\n\r\nexport default CardCommentsLayout;","import Card from \"@material-ui/core/Card\";\r\nimport {CardContent} from \"@material-ui/core\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport React from \"react\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n    center: {\r\n        width: '100%'\r\n    }\r\n})\r\n\r\nfunction Loading() {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Card>\r\n            <CardContent>\r\n                <LinearProgress className={classes.center} />\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default Loading;","import {makeStyles} from \"@material-ui/core/styles\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles({\r\n    add: {\r\n        width: '100%',\r\n        marginBottom: 10\r\n    },\r\n    media: {\r\n        height: 140\r\n    }\r\n})\r\n\r\nexport default function CardVideoWithAbout(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n\r\n    return (\r\n        <Card className={classes.add}>\r\n            <CardActionArea onClick={() => {\r\n                history.push(\"/video/\" + props.item.id);\r\n                history.go(0)\r\n            }}>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"subtitle1\">\r\n                        {props.item.name}\r\n                    </Typography>\r\n                    <Typography gutterBottom variant=\"body2\">\r\n                        {props.item.about}\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle2\">\r\n                        {props.item.user.name}\r\n                    </Typography>\r\n                </CardContent>\r\n            </CardActionArea>\r\n        </Card>\r\n    )\r\n}","import React, {useEffect, useState} from 'react';\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport API from \"../utils/API\";\r\nimport Loading from \"../components/Loading\";\r\nimport CardVideoWithAbout from \"../components/CardVideoWithAbout\";\r\n\r\n\r\nfunction VerticalPanelCardsVideosLayout() {\r\n\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [videosData, setVideosData] = useState([]);\r\n\r\n    useEffect(() => {\r\n        API.get('/videos?size=5&sort=name,asc')\r\n            .then((res) => {\r\n                    console.log(res.data.content);\r\n                    setVideosData(res.data.content);\r\n                    setIsLoaded(true);\r\n                },\r\n                (error) => {\r\n                    const response = error.response\r\n                    console.log(response)\r\n                })\r\n            .catch(() => {\r\n                console.log('WOOOOW');\r\n            });\r\n    }, []);\r\n\r\n\r\n\r\n    const Videos = (\r\n        <div>\r\n            <Typography gutterBottom variant=\"subtitle1\" color=\"textSecondary\">\r\n                {\"Другие видео\"}\r\n            </Typography>\r\n            {\r\n                Array.prototype.map.call(videosData, function (item) {\r\n                    return <CardVideoWithAbout item={item} />;\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n\r\n    return !isLoaded ? <Loading />  : Videos;\r\n}\r\n\r\nexport default VerticalPanelCardsVideosLayout;","import API from \"../utils/API\";\r\n\r\n\r\nexport async function loginUser(dispatch, loginPayload) {\r\n    console.log(loginPayload);\r\n    let ok = false;\r\n    dispatch({ type: 'REQUEST_LOGIN' });\r\n    await API.post(\"/auth\", loginPayload).then((response) => {\r\n        let data = response.data;\r\n        console.log(data);\r\n        if (data.username) {\r\n            dispatch({ type: 'LOGIN_SUCCESS', payload: data });\r\n            console.log(data);\r\n            localStorage.setItem('currentUser', JSON.stringify(data));\r\n            ok = true;\r\n            return;\r\n        }\r\n        dispatch({ type: 'LOGIN_ERROR', error: data.errors[0] });\r\n        console.log(data);\r\n        ok = false;\r\n    },\r\n        (error) => {\r\n            const response = error.response\r\n            dispatch({ type: 'LOGIN_ERROR', error: response.data });\r\n            console.log(response)\r\n            ok = false;\r\n        });\r\n    return ok;\r\n}\r\n\r\nexport async function logout(dispatch) {\r\n    dispatch({ type: 'LOGOUT' });\r\n    localStorage.removeItem('currentUser');\r\n    localStorage.removeItem('token');\r\n}\r\n\r\nexport function checkAuth(dispatch) {\r\n    API.put('/auth/check', '').then(() => {\r\n        console.log(\"auth ok!\");\r\n    }).catch((error) => {\r\n        console.log(\"auth error!\");\r\n        dispatch({type: 'LOGOUT'});\r\n        localStorage.removeItem('currentUser');\r\n        localStorage.removeItem('token');\r\n    });\r\n}\r\n\r\nexport function changeUsername(dispatch, payload) {\r\n    dispatch({ type: 'LOGIN_SUCCESS', payload: payload });\r\n    localStorage.setItem('currentUser', JSON.stringify(payload));\r\n}","import React, { useState, useReducer } from 'react';\r\n\r\n\r\nconsole.log(localStorage.getItem('currentUser'));\r\n\r\nlet user = localStorage.getItem('currentUser')\r\n    ? JSON.parse(localStorage.getItem('currentUser'))\r\n    : '';\r\nlet token = localStorage.getItem('currentUser')\r\n    ? JSON.parse(localStorage.getItem('currentUser')).token\r\n    : '';\r\n\r\nexport const initialState = {\r\n    user: '' || user,\r\n    token: '' || token,\r\n    loading: false,\r\n    errorMessage: null,\r\n};\r\n\r\nconsole.log(initialState);\r\n\r\nexport const AuthReducer = (initialState, action) => {\r\n    switch (action.type) {\r\n        case 'REQUEST_LOGIN':\r\n            return {\r\n                ...initialState,\r\n                loading: true,\r\n            };\r\n        case 'LOGIN_SUCCESS':\r\n            return {\r\n                ...initialState,\r\n                user: action.payload,\r\n                token: action.payload.token,\r\n                loading: false,\r\n            };\r\n        case 'LOGOUT':\r\n            return {\r\n                ...initialState,\r\n                user: '',\r\n                token: '',\r\n            };\r\n\r\n        case 'LOGIN_ERROR':\r\n            return {\r\n                ...initialState,\r\n                loading: false,\r\n                errorMessage: action.error,\r\n            };\r\n\r\n        default:\r\n            throw new Error(`Unhandled action type: ${action.type}`);\r\n    }\r\n}","import React, { useReducer } from 'react';\r\nimport { initialState, AuthReducer } from './reducer';\r\n\r\nconst AuthStateContext = React.createContext();\r\nconst AuthDispatchContext = React.createContext();\r\n\r\nexport function useAuthState() {\r\n    const context = React.useContext(AuthStateContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuthState must be used within a AuthProvider');\r\n    }\r\n\r\n    return context;\r\n}\r\n\r\nexport function useAuthDispatch() {\r\n    const context = React.useContext(AuthDispatchContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuthDispatch must be used within a AuthProvider');\r\n    }\r\n\r\n    return context;\r\n}\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, dispatch] = useReducer(AuthReducer, initialState);\r\n    return (\r\n        <AuthStateContext.Provider value={user}>\r\n            <AuthDispatchContext.Provider value={dispatch}>\r\n                {children}\r\n            </AuthDispatchContext.Provider>\r\n        </AuthStateContext.Provider>\r\n    );\r\n};","import CardMedia from \"@material-ui/core/CardMedia\";\r\nimport CardHeader from \"@material-ui/core/CardHeader\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport {CardContent, IconButton} from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport API from \"../../utils/API\";\r\nimport {ThumbDown, ThumbUp} from \"@material-ui/icons\";\r\nimport {useAuthState} from \"../../context\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {useHistory} from \"react-router\";\r\nimport Loading from \"../../components/Loading\";\r\n\r\nconst useStyles = makeStyles({\r\n    video: {\r\n        width: '100%',\r\n        outline: 'none'\r\n    }\r\n})\r\n\r\nfunction CardVideoLayout(props) {\r\n\r\n    const [videoToken] = useState(props.videoToken);\r\n    const userDetails = useAuthState();\r\n    const auth = userDetails.token !== '';\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [videoData, setVideoData] = useState({\r\n        id: 0,\r\n        video: 'unknow',\r\n        user: {\r\n            id: 0,\r\n            name: 'name',\r\n            img: 'img'\r\n        }\r\n    })\r\n    const [mark, setMark] = useState({\r\n        likes: 0,\r\n        dislikes: 0\r\n    })\r\n    const [like, setLike] = useState(0);\r\n    const [token] = useState(videoToken);\r\n    const [markLoad, setMarkLoad] = useState(false);\r\n\r\n\r\n    function loadMarks() {\r\n        setMarkLoad(true);\r\n        if (auth) {\r\n            API.get(`/marks/${videoToken}/user/${userDetails.user.id}`)\r\n                .then((response) => {\r\n                        const mark = response.data.data;\r\n                        setMarkLoad(false);\r\n                        setMark({\r\n                            likes: mark.likes,\r\n                            dislikes: mark.dislikes\r\n                        });\r\n                        setLike(mark.markOwner);\r\n                    },\r\n                    (error) => {\r\n                        enqueueSnackbar(\"Произошла ошибка при загрузке лайков\", { variant: \"error\"})\r\n                    })\r\n        } else {\r\n            API.get(`/marks/${videoToken}`)\r\n                .then((response) => {\r\n                        const mark = response.data.data;\r\n                        setMarkLoad(false);\r\n                        setMark({\r\n                            likes: mark.likes,\r\n                            dislikes: mark.dislikes\r\n                        });\r\n                        setLike(0);\r\n                    },\r\n                    (error) => {\r\n                        enqueueSnackbar(\"Произошла ошибка при загрузке лайков\", { variant: \"error\"})\r\n                    })\r\n        }\r\n    }\r\n\r\n    function changeMark(mark) {\r\n        setMarkLoad(true);\r\n        const data = {\r\n            videoId: videoToken,\r\n            userId: userDetails.user.id,\r\n            mark: mark\r\n        }\r\n        API.post('/marks/', data)\r\n            .then((response) => {\r\n                    const mark = response.data.data;\r\n                    setMarkLoad(false);\r\n                    setMark({\r\n                        likes: mark.likes,\r\n                        dislikes: mark.dislikes\r\n                    });\r\n                    setLike(mark.markOwner);\r\n            },\r\n                (error) => {\r\n                    enqueueSnackbar(\"Произошла ошибка при установки лайка\", { variant: \"error\"})\r\n                    setMarkLoad(false);\r\n                    setLike(0);\r\n                    setMarkLoad(false);\r\n                });\r\n    }\r\n\r\n    function deleteVideo() {\r\n        API.delete(\"videos/\" + videoToken)\r\n            .then((response) => {\r\n                    enqueueSnackbar(\"Успешное удаление\", {variant: \"success\"});\r\n                    history.push(\"/\");\r\n                },\r\n                (error) => {\r\n                    console.log(error);\r\n                    enqueueSnackbar(\"Произошла ошибка при удалении\", {variant: \"error\"});\r\n                })\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        API.get('/videos/' + token)\r\n            .then((res) => {\r\n                console.log(res.data.data);\r\n                setVideoData(res.data.data);\r\n                setIsLoaded(true);\r\n                loadMarks();\r\n            },\r\n                (error) => {\r\n                    enqueueSnackbar(\"Произошла ошибка\", { variant: \"error\"})\r\n                })\r\n            .catch(() => {\r\n            });\r\n    }, []);\r\n\r\n    function handleLike() {\r\n        if (like === 1) {\r\n            changeMark(0);\r\n        }\r\n        else {\r\n            changeMark(1);\r\n        }\r\n    }\r\n\r\n    function handleDislike() {\r\n        if (like === -1) {\r\n            changeMark(0);\r\n        }\r\n        else {\r\n            changeMark(-1);\r\n        }\r\n    }\r\n\r\n    const Video = (\r\n        <Card>\r\n            <CardMedia>\r\n                <video className={classes.video} controls>\r\n                    <source src={\"http://localhost:8080/api/file/videos/\" + videoData.video} type=\"video/mp4\"/>\r\n                </video>\r\n            </CardMedia>\r\n            <CardHeader\r\n                title={videoData.name}\r\n                subheader={\r\n                    <React.Fragment>\r\n                        <Typography\r\n                            gutterBottom\r\n                            variant=\"subtitle1\"\r\n                        >\r\n                            {videoData.views + \" просмотров\"}\r\n                        </Typography>\r\n                        <Typography\r\n                            variant=\"subtitle2\"\r\n                        >\r\n                            {new Date(videoData.createDate).toLocaleDateString()}\r\n                        </Typography>\r\n                        {videoData.isPrivate &&\r\n                        <Typography\r\n                            variant=\"subtitle2\"\r\n                        >\r\n                            {\"Это приватное видео\"}\r\n                        </Typography>\r\n                        }\r\n                    </React.Fragment>\r\n                }\r\n                action={\r\n                    <React.Fragment>\r\n                        <IconButton\r\n                            color={like === 1 ? \"primary\" : \"default\"}\r\n                            disabled={!auth || markLoad}\r\n                            onClick={handleLike}\r\n                        >\r\n                            <ThumbUp />\r\n                        </IconButton>\r\n                        <Typography\r\n                            variant=\"subtitle2\"\r\n                            style={{display: 'inline'}}\r\n                            color=\"textSecondary\"\r\n                        >\r\n                            {mark.likes}\r\n                        </Typography>\r\n                        <IconButton\r\n                            color={like === -1 ? \"primary\" : \"default\"}\r\n                            disabled={!auth || markLoad}\r\n                            onClick={handleDislike}\r\n                        >\r\n                            <ThumbDown />\r\n                        </IconButton>\r\n                        <Typography\r\n                            variant=\"subtitle2\"\r\n                            color=\"textSecondary\"\r\n                            style={{display: 'inline'}}\r\n                        >\r\n                            {mark.dislikes}\r\n                        </Typography>\r\n                    </React.Fragment>\r\n                }\r\n            />\r\n            <Divider variant=\"middle\" />\r\n            <CardHeader\r\n                avatar={\r\n                    <Avatar onClick={() => history.push(\"/user/\" + videoData.user.id)} style={{cursor: 'pointer'}}>\r\n                        {videoData.user.name[0].toUpperCase()}\r\n                    </Avatar>\r\n                }\r\n                title={<div onClick={() => history.push(\"/user/\" + videoData.user.id)} style={{cursor: 'pointer'}}>{videoData.user.name}</div>}/>\r\n            <CardContent>\r\n                <Typography>\r\n                    {videoData.about}\r\n                </Typography>\r\n            </CardContent>\r\n            {userDetails.user.isAdmin === true &&\r\n            <CardActions>\r\n                <Button color=\"secondary\" onClick={deleteVideo}>Удалить видео</Button>\r\n            </CardActions>}\r\n        </Card>\r\n    );\r\n\r\n    return !isLoaded ? <Loading /> : Video;\r\n\r\n}\r\n\r\nexport default CardVideoLayout;","import React, {useEffect} from 'react';\r\nimport 'fontsource-roboto';\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport CardCommentsLayout from \"../layouts/video/CardCommentsLayout\";\r\nimport VerticalPanelCardsVideosLayout from \"../layouts/VerticalPanelCardsVideosLayout\";\r\nimport CardVideoLayout from \"../layouts/video/CardVideoLayout\";\r\nimport {useAuthDispatch, useAuthState} from \"../context\";\r\nimport {checkAuth} from \"../context/actions\";\r\n\r\n\r\nfunction VideoPage() {\r\n    const { videoToken } = useParams();\r\n    const dispatch = useAuthDispatch();\r\n    const userDetails = useAuthState();\r\n    const auth = userDetails.token !== '';\r\n    useEffect(() => checkAuth(dispatch), []);\r\n    return (\r\n        <Grid container spacing={4} justify=\"center\">\r\n            <Grid item lg={11} md={9} xs={12}>\r\n                <CardVideoLayout videoToken={videoToken} />\r\n            </Grid>\r\n            <Grid item xs={12} md={6} lg={7} sm={7}>\r\n                <CardCommentsLayout isAdmin={userDetails.user.isAdmin === true} videoId={videoToken} userId={userDetails.user.id} auth={auth} />\r\n            </Grid>\r\n            <Grid item xs={10} md={3} lg={4} sm={5}>\r\n                <VerticalPanelCardsVideosLayout />\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n}\r\n\r\nexport default VideoPage;","import {useHistory} from \"react-router-dom\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React from \"react\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\n\r\nconst useStyles = makeStyles({\r\n    card: {\r\n        width: 355\r\n    },\r\n    card_img: {\r\n        width: '100%',\r\n        minHeight: 200,\r\n        objectFit: 'contain'\r\n    }\r\n})\r\n\r\nexport default function CardVideoWithViews(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n\r\n    return (\r\n        <Grid item xs=\"auto\">\r\n            <Card className={classes.card}>\r\n                <CardActionArea onClick={() => history.push(\"/video/\" + props.item.id)}>\r\n                    <CardContent>\r\n                        <Typography gutterBottom variant=\"h5\">\r\n                            {props.item.name}\r\n                        </Typography>\r\n                        <Typography variant=\"subtitle2\">\r\n                            {\"Автор: \" + props.item.user.name}\r\n                        </Typography>\r\n                        <Grid container justify=\"flex-end\" wrap=\"nowrap\" alignItems=\"center\" spacing={1}>\r\n                            <Grid item>\r\n                                <Typography variant=\"body2\">{\"Количество просмотров: \" + props.item.views}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n            </Card>\r\n        </Grid>\r\n    )\r\n}","import Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React from \"react\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport CardVideoWithViews from \"../components/CardVideoWithViews\";\r\n\r\n\r\nexport default function PanelCardsVideosLayout(props) {\r\n    const videosData = props.videosData;\r\n    const handleNextPage = props.handleNextPage;\r\n    const nextPage = props.nextPage;\r\n    return (\r\n        <Grid container spacing={4} justify=\"flex-start\" alignItems=\"center\">\r\n            {videosData.length === 0 &&\r\n            <Grid container item xs={12} justify=\"center\">\r\n                <Typography variant=\"h5\" color=\"textSecondary\">\r\n                    Видео не найдены\r\n                </Typography>\r\n            </Grid>}\r\n            {\r\n                videosData.length !== 0 &&\r\n                <React.Fragment>\r\n                    {\r\n                        Array.prototype.map.call(videosData, function (item) {\r\n                            return <CardVideoWithViews key={item.id} item={item} />;\r\n                        })\r\n                    }\r\n                    {nextPage &&\r\n                    <Grid container item xs={12} justify=\"center\">\r\n                        <Button variant=\"outlined\" onClick={handleNextPage}>\r\n                            Показать еще\r\n                        </Button>\r\n                    </Grid>}\r\n                </React.Fragment>\r\n            }\r\n        </Grid>\r\n    )\r\n}","import React, {useEffect, useState} from \"react\";\r\nimport API from \"../../utils/API\";\r\nimport {useLocation} from \"react-router\";\r\nimport Loading from \"../../components/Loading\";\r\nimport PanelCardsVideosLayout from \"../PanelCardsVideosLayout\";\r\n\r\n\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nfunction HomeVideosLayout() {\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [videosData, setVideosData] = useState([]);\r\n    const [page, setPage] = useState(0);\r\n    const [next, setNext] = useState(false);\r\n    const query = useQuery();\r\n    const [name] = useState(query.get(\"name\"))\r\n    const [sort] = useState(query.get(\"sort\"))\r\n\r\n    useEffect(() => {\r\n        const url = name ? `/videos?page=${page}&name=${name}` : (sort ? `/videos?page=${page}&sort=views,desc` : `/videos?page=${page}`);\r\n        API.get(url)\r\n            .then((res) => {\r\n                    const v = videosData.slice();\r\n                    Array.prototype.map.call(res.data.content, (item) => {\r\n                        v.push(item);\r\n                    })\r\n                    setVideosData(v);\r\n                    setIsLoaded(true);\r\n                    setNext((page + 1) !== res.data.totalPages);\r\n                },\r\n                (error) => {\r\n                    const response = error.response\r\n                    console.log(response)\r\n                })\r\n            .catch(() => {\r\n                console.log('WOOOOW');\r\n            });\r\n    }, [page]);\r\n\r\n\r\n    const Videos = <PanelCardsVideosLayout\r\n        handleNextPage={() => { setPage(page + 1);}}\r\n        nextPage={next}\r\n        videosData={videosData}\r\n    />\r\n\r\n    return !isLoaded ? <Loading />  : Videos;\r\n}\r\n\r\nexport default HomeVideosLayout;","import React, {useEffect} from \"react\";\r\nimport {useAuthDispatch} from \"../context\";\r\nimport {checkAuth} from \"../context/actions\";\r\nimport HomeVideosLayout from \"../layouts/home/HomeVideosLayout\";\r\n\r\n\r\n\r\n\r\n\r\nfunction HomePage() {\r\n    const dispatch = useAuthDispatch();\r\n    useEffect(() => checkAuth(dispatch), []);\r\n    return (\r\n        <HomeVideosLayout />\r\n    )\r\n}\r\n\r\nexport default HomePage;","import IconButton from \"@material-ui/core/IconButton\";\r\nimport React, {useState} from \"react\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport {orange} from \"@material-ui/core/colors\";\r\nimport grey from \"@material-ui/core/colors/grey\";\r\nimport {Container} from \"@material-ui/core\";\r\nimport {useHistory, useLocation} from \"react-router\";\r\nimport {Star} from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        padding: '2px 4px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        maxWidth: 400,\r\n        background: \"#ffa82b\"\r\n    },\r\n    input: {\r\n        marginLeft: theme.spacing(1),\r\n        flex: 1,\r\n    },\r\n    iconButton: {\r\n        padding: 10,\r\n    },\r\n    divider: {\r\n        height: 28,\r\n        margin: 4,\r\n    },\r\n}));\r\n\r\nconst innerTheme = createMuiTheme({\r\n    palette: {\r\n        primary: orange,\r\n        secondary: orange,\r\n        info: grey,\r\n    },\r\n});\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function CustomizedSearch() {\r\n    const classes = useStyles();\r\n    const query = useQuery();\r\n    const [str, setStr] = useState(query.get(\"name\") ? query.get(\"name\") : \"\");\r\n    const history = useHistory();\r\n\r\n    function searchSubmit(event) {\r\n        event.preventDefault();\r\n        if (!(!str || /^\\s*$/.test(str))) {\r\n            history.push(\"/?name=\" + str);\r\n            history.go(0)\r\n        } else {\r\n            setStr(\"\");\r\n        }\r\n    }\r\n\r\n    function changeString(event) {\r\n        setStr(event.target.value);\r\n    }\r\n\r\n    function sortByLikes() {\r\n        history.push(\"/?sort=views\");\r\n        window.location.reload();\r\n    }\r\n\r\n    return (\r\n        <ThemeProvider theme={innerTheme}>\r\n            <Container component=\"form\" className={classes.root} onSubmit={searchSubmit}>\r\n                <InputBase\r\n                    className={classes.input}\r\n                    placeholder=\"Поиск\"\r\n                    inputProps={{ 'aria-label': 'Поиск' }}\r\n                    onChange={changeString}\r\n                    value={str}\r\n                />\r\n                <IconButton color=\"inherit\" type=\"submit\" className={classes.iconButton} aria-label=\"search\">\r\n                    <SearchIcon />\r\n                </IconButton>\r\n                <Divider className={classes.divider} orientation=\"vertical\" />\r\n                <IconButton color=\"inherit\" className={classes.iconButton} aria-label=\"directions\" onClick={sortByLikes}>\r\n                    <Star fontSize=\"small\" />\r\n                </IconButton>\r\n            </Container>\r\n        </ThemeProvider>\r\n    );\r\n}","import React, {useEffect} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport {ExitToApp, VideoCall} from \"@material-ui/icons\";\r\nimport {useHistory} from \"react-router-dom\";\r\nimport {logout, useAuthDispatch, useAuthState} from \"../context\";\r\nimport {checkAuth} from \"../context/actions\";\r\nimport CustomizedSearch from \"../components/CustomSearch\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        display: 'none',\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'block',\r\n        },\r\n        cursor: 'pointer'\r\n    },\r\n    titleOne: {\r\n        display: 'block',\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'none',\r\n        },\r\n        cursor: 'pointer'\r\n    },\r\n    search: {\r\n        marginRight: theme.spacing(2),\r\n        marginLeft: theme.spacing(2),\r\n        width: '100%',\r\n        [theme.breakpoints.up('sm')]: {\r\n            marginLeft: theme.spacing(3),\r\n            width: 'auto',\r\n        },\r\n    },\r\n    sectionDesktop: {\r\n        display: 'none',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'flex',\r\n        },\r\n    },\r\n    sectionMobile: {\r\n        display: 'flex',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'none',\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function PrimarySearchAppBar() {\r\n    const classes = useStyles();\r\n    const dispatch = useAuthDispatch();\r\n    const userDetails = useAuthState();\r\n    const auth = userDetails.token !== '';\r\n    useEffect(() => checkAuth(dispatch), []);\r\n    const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n\r\n\r\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n    const history = useHistory();\r\n\r\n    const handleProfileMenuOpen = (event) => {\r\n        if (!auth) {\r\n            history.push(\"/auth\");\r\n        } else {\r\n            history.push(\"/profile\");\r\n        }\r\n        handleMobileMenuClose()\r\n    };\r\n\r\n    const handleMobileMenuClose = () => {\r\n        setMobileMoreAnchorEl(null);\r\n    };\r\n\r\n    const handleExit = async () => {\r\n        await logout(dispatch);\r\n        handleMobileMenuClose()\r\n    };\r\n\r\n    const handleNewVideo = () => {\r\n        if (auth) {\r\n            history.push(\"/new\");\r\n        }\r\n        handleMobileMenuClose()\r\n    }\r\n\r\n\r\n    const handleMobileMenuOpen = (event) => {\r\n        setMobileMoreAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const menuId = 'primary-search-account-menu';\r\n\r\n    const mobileMenuId = 'primary-search-account-menu-mobile';\r\n    const renderMobileMenu = (\r\n        <Menu\r\n            anchorEl={mobileMoreAnchorEl}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            id={mobileMenuId}\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={isMobileMenuOpen}\r\n            onClose={handleMobileMenuClose}\r\n        >\r\n            {auth &&\r\n            <MenuItem onClick={handleNewVideo}>\r\n                <IconButton color=\"inherit\">\r\n                    <Badge color=\"secondary\">\r\n                        <VideoCall />\r\n                    </Badge>\r\n                </IconButton>\r\n                <p>Добавить видео</p>\r\n            </MenuItem>\r\n            }\r\n            <MenuItem onClick={handleProfileMenuOpen}>\r\n                <IconButton\r\n                    aria-label=\"account of current user\"\r\n                    aria-controls=\"primary-search-account-menu\"\r\n                    aria-haspopup=\"true\"\r\n                    color=\"inherit\"\r\n                >\r\n                    <AccountCircle />\r\n                </IconButton>\r\n                <p>Profile</p>\r\n            </MenuItem>\r\n            {auth && <MenuItem onClick={handleExit}>\r\n                <IconButton\r\n                    aria-label=\"Выйти из аккаунта\"\r\n                    aria-controls=\"primary-search-account-menu\"\r\n                    aria-haspopup=\"true\"\r\n                    color=\"inherit\"\r\n                >\r\n                    <ExitToApp/>\r\n                </IconButton>\r\n                <p>Exit</p>\r\n            </MenuItem>\r\n            }\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <div className={classes.grow}>\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <Typography className={classes.title} variant=\"h6\" noWrap onClick={() => {\r\n                        const go = window.location.pathname === \"/\";\r\n                        history.push(\"/\");\r\n                        if (go) history.go(0);\r\n                    }}>\r\n                        Tronica\r\n                    </Typography>\r\n                    <Typography className={classes.titleOne} variant=\"h5\" onClick={() => {\r\n                        const go = window.location.pathname === \"/\";\r\n                        history.push(\"/\");\r\n                        if (go) history.go(0);\r\n                    }}>\r\n                        T\r\n                    </Typography>\r\n                    <div className={classes.search}>\r\n                        <CustomizedSearch />\r\n                    </div>\r\n                    <div className={classes.grow} />\r\n                    <div className={classes.sectionDesktop}>\r\n                        {auth &&\r\n                        <IconButton aria-label=\"Добавить новое видео\" color=\"inherit\" onClick={handleNewVideo}>\r\n                            <Badge color=\"secondary\">\r\n                                <VideoCall />\r\n                            </Badge>\r\n                        </IconButton>\r\n                        }\r\n\r\n                        <IconButton\r\n                            aria-label=\"Ваш аккаунт\"\r\n                            aria-controls={menuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleProfileMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle />\r\n                        </IconButton>\r\n                        {auth &&\r\n                        <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"Выйти из аккаунта\"\r\n                            aria-controls={menuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleExit}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <ExitToApp/>\r\n                        </IconButton>\r\n                        }\r\n                    </div>\r\n                    <div className={classes.sectionMobile}>\r\n                        <IconButton\r\n                            aria-label=\"show more\"\r\n                            aria-controls={mobileMenuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleMobileMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <MoreIcon />\r\n                        </IconButton>\r\n                    </div>\r\n                </Toolbar>\r\n            </AppBar>\r\n            {renderMobileMenu}\r\n        </div>\r\n    );\r\n}","import React, {useRef, useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport {loginUser, useAuthDispatch, useAuthState} from \"../../context\";\r\nimport {useHistory} from \"react-router\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport API from \"../../utils/API\";\r\nimport { ValidatorForm, TextValidator} from 'react-material-ui-form-validator';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    input: {\r\n        WebkitBoxShadow: \"0 0 0 1000px #303030 inset\"\r\n    }\r\n}));\r\n\r\nexport default function LoginLayout(props) {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const [formData, setFormData] = useState({\r\n        login: '',\r\n        password: ''\r\n    })\r\n\r\n    const dispatch = useAuthDispatch();\r\n    const { loading } = useAuthState();\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            let username = formData.login;\r\n            let password = formData.password;\r\n            let user = await loginUser(dispatch, { username, password });\r\n            console.log('alo', user);\r\n            if (user) {\r\n                enqueueSnackbar(\"Вы авторизованы!\", { variant: 'success' });\r\n                history.push('/');\r\n            } else {\r\n                enqueueSnackbar(\"Неправильный логин/пароль\", { variant: 'error' });\r\n            }\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleChange = (event) => {\r\n        const formData1 = {\r\n            password: formData.password,\r\n            login: formData.login\r\n        };\r\n        formData1[event.target.name] = event.target.value;\r\n        setFormData(formData1);\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"sm\">\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h5\" color=\"textPrimary\">\r\n                    Войти\r\n                </Typography>\r\n                <ValidatorForm className={classes.form} onSubmit={handleLogin}>\r\n                    <TextValidator\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        fullWidth\r\n                        id=\"login\"\r\n                        label=\"Логин\"\r\n                        name=\"login\"\r\n                        autoComplete=\"username\"\r\n                        autoFocus\r\n                        disabled={loading}\r\n                        validators={['required']}\r\n                        errorMessages={['Это поле обязательное']}\r\n                        value={formData.login}\r\n                        onChange={handleChange}\r\n                        inputProps={{ className: classes.input }}\r\n                    />\r\n                    <TextValidator\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        fullWidth\r\n                        name=\"password\"\r\n                        label=\"Пароль\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"current-password\"\r\n                        disabled={loading}\r\n                        validators={['required']}\r\n                        errorMessages={['Это поле обязательное']}\r\n                        value={formData.password}\r\n                        onChange={handleChange}\r\n                        inputProps={{ className: classes.input }}\r\n                    />\r\n                    <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                    >\r\n                        Войти\r\n                    </Button>\r\n                    <Grid container>\r\n                        <Grid item xs>\r\n                            <Link style={{cursor: 'pointer'}} variant=\"body2\" onClick={handleClickOpen}>\r\n                                Забыли пароль?\r\n                            </Link>\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Link style={{cursor: 'pointer'}} variant=\"body2\" onClick={() => props.handleLink()}>\r\n                                {\"Нет аккаунта? Зарегистрироваться\"}\r\n                            </Link>\r\n                        </Grid>\r\n                    </Grid>\r\n                </ValidatorForm>\r\n            </div>\r\n            <ResetPassword handleClose={handleClose} open={open} />\r\n        </Container>\r\n    );\r\n}\r\n\r\n\r\nfunction ResetPassword(props) {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const emailRef = useRef(null);\r\n\r\n    const handleButton = async () => {\r\n\r\n        const data = {\r\n            email: emailRef.current.value\r\n        }\r\n\r\n        await API.post('reset', data)\r\n            .then((data) => {\r\n                    enqueueSnackbar(\"Проверьте почту\", { variant: 'success' });\r\n            },\r\n                (error) => {\r\n                    enqueueSnackbar(\"Пользователя с такой почтой не существует\", { variant: 'error' });\r\n            });\r\n\r\n\r\n        props.handleClose();\r\n    }\r\n\r\n    return (\r\n        <Dialog open={props.open} onClose={props.handleClose} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">Восстановление пароля</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText>\r\n                    Введите свою почту для восстановления пароля\r\n                </DialogContentText>\r\n                <TextField\r\n                    autoFocus\r\n                    margin=\"dense\"\r\n                    id=\"name\"\r\n                    inputRef={emailRef}\r\n                    label=\"Email\"\r\n                    type=\"email\"\r\n                    autoComplete=\"email\"\r\n                    fullWidth\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.handleClose} color=\"primary\">\r\n                    Отмена\r\n                </Button>\r\n                <Button onClick={handleButton} color=\"primary\">\r\n                    Восстановить пароль\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import React, { useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport API from \"../../utils/API\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport { ValidatorForm, TextValidator} from 'react-material-ui-form-validator';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    avatar: {\r\n        margin: theme.spacing(1),\r\n        backgroundColor: theme.palette.secondary.main,\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n    input: {\r\n        WebkitBoxShadow: \"0 0 0 1000px #303030 inset\"\r\n    }\r\n}));\r\n\r\nexport default function RegisterLayout(props) {\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: '',\r\n        login: ''\r\n    })\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSignUp = () => {\r\n        setLoading(true);\r\n        const data = {\r\n            username: formData.login,\r\n            email: formData.email,\r\n            password: formData.password\r\n        }\r\n        API\r\n            .post('register', data)\r\n            .then((res) => {\r\n                setLoading(false);\r\n                enqueueSnackbar(\"Вы зарегистрированы!\", { variant: 'success' });\r\n                props.handleLink();\r\n            }, (error) => {\r\n                setLoading(false);\r\n                const response = error.response.data;\r\n                enqueueSnackbar(response.error, { variant: 'error' });\r\n                console.log(response);\r\n            });\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        const formData1 = {\r\n            email: formData.email,\r\n            password: formData.password,\r\n            login: formData.login\r\n        };\r\n        formData1[event.target.name] = event.target.value;\r\n        setFormData(formData1);\r\n    }\r\n\r\n\r\n    return (\r\n        <Container maxWidth=\"sm\">\r\n            <CssBaseline />\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Регистрация\r\n                </Typography>\r\n                <ValidatorForm className={classes.form}\r\n                               onSubmit={handleSignUp}>\r\n                    <Grid container spacing={2}>\r\n                        <Grid item xs={12}>\r\n                            <TextValidator\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                onChange={handleChange}\r\n                                label=\"Логин\"\r\n                                name=\"login\"\r\n                                autoComplete=\"username\"\r\n                                validators={['required']}\r\n                                errorMessages={['Это поле обязательное']}\r\n                                value={formData.login}\r\n                                disabled={loading}\r\n                                inputProps={{ className: classes.input }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextValidator\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                onChange={handleChange}\r\n                                label=\"Email\"\r\n                                name=\"email\"\r\n                                autoComplete=\"email\"\r\n                                validators={['required', 'isEmail']}\r\n                                errorMessages={['Это поле обязательное', 'Неверный формат']}\r\n                                value={formData.email}\r\n                                disabled={loading}\r\n                                inputProps={{ className: classes.input }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextValidator\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                                onChange={handleChange}\r\n                                name=\"password\"\r\n                                label=\"Пароль\"\r\n                                type=\"password\"\r\n                                autoComplete=\"new-password\"\r\n                                validators={['required']}\r\n                                errorMessages={['Это поле обязательное']}\r\n                                value={formData.password}\r\n                                disabled={loading}\r\n                                inputProps={{ className: classes.input }}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className={classes.submit}\r\n                    >\r\n                        Зарегистрироваться\r\n                    </Button>\r\n                    <Grid container justify=\"flex-end\">\r\n                        <Grid item>\r\n                            <Link style={{cursor: 'pointer'}} variant=\"body2\" onClick={() => props.handleLink()}>\r\n                                Уже есть аккаунт? Войти\r\n                            </Link>\r\n                        </Grid>\r\n                    </Grid>\r\n                </ValidatorForm>\r\n            </div>\r\n        </Container>\r\n    );\r\n}","import React, {useState} from \"react\";\r\nimport LoginLayout from \"../layouts/auth/LoginLayout\";\r\nimport RegisterLayout from \"../layouts/auth/RegisterLayout\";\r\n\r\nfunction AuthPage() {\r\n    const [login, setLogin] = useState(true);\r\n\r\n\r\n    function handleLink() {\r\n        setLogin(!login);\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            {\r\n                login ? <LoginLayout handleLink={handleLink}/> : <RegisterLayout handleLink={handleLink}/>\r\n            }\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default AuthPage;","import { Container, makeStyles} from \"@material-ui/core\";\r\nimport {TextValidator, ValidatorForm} from \"react-material-ui-form-validator\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport React, {useState} from \"react\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport API from \"../utils/API\";\r\nimport {useAuthState} from \"../context\";\r\n\r\nfunction CircularProgressWithLabel(props) {\r\n    return (\r\n        <Box position=\"relative\" display=\"inline-flex\">\r\n            <CircularProgress variant=\"determinate\" {...props} />\r\n            <Box\r\n                top={0}\r\n                left={0}\r\n                bottom={0}\r\n                right={0}\r\n                position=\"absolute\"\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"center\"\r\n            >\r\n                <Typography variant=\"caption\" component=\"div\" >{`${Math.round(\r\n                    props.value,\r\n                )}%`}</Typography>\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n\r\nconst userStyle = makeStyles((theme) => ({\r\n    input: {\r\n        display: 'none'\r\n    },\r\n    paper: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    }\r\n}));\r\n\r\nexport default function NewVideoPage() {\r\n    const classes = userStyle();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const userDetails = useAuthState();\r\n    const [load, setLoad] = React.useState(false);\r\n    const [progress, setProgress] = useState(0);\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        about: '',\r\n    })\r\n\r\n    const handleChange = (event) => {\r\n        const formData1 = {\r\n            name: formData.name,\r\n            about: formData.about,\r\n        };\r\n        formData1[event.target.name] = event.target.value;\r\n        setFormData(formData1);\r\n    }\r\n\r\n    const handleNewVideo = async () => {\r\n        setLoad(true);\r\n        const f = new FormData();\r\n        f.append(\"name\", formData.name);\r\n        f.append(\"about\", formData.about);\r\n        f.append(\"userId\", userDetails.id);\r\n\tf.append(\"isPrivate\", false);\r\n        f.append(\"file\", document.getElementById(\"icon-button-file\").files[0])\r\n        await API.post(\"file/videos\", f, {\r\n            onUploadProgress: (progressEvent) => {\r\n                const totalLength = progressEvent.lengthComputable ? progressEvent.total : progressEvent.target.getResponseHeader('content-length') || progressEvent.target.getResponseHeader('x-decompressed-content-length');\r\n                console.log(\"onUploadProgress\", totalLength);\r\n                if (totalLength !== null) {\r\n                    setProgress(Math.round((progressEvent.loaded * 100) / totalLength));\r\n                }\r\n            }\r\n        }).then((response) => {\r\n            console.log(response.data);\r\n                setLoad(false);\r\n                setProgress(0);\r\n        },\r\n            (error) => {\r\n                console.log(error);\r\n                enqueueSnackbar(error.response, { variant: \"error\"});\r\n                setLoad(false);\r\n                setProgress(0);\r\n            }).catch((error) => {\r\n                console.log(error);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth={\"sm\"}>\r\n            <div className={classes.paper}>\r\n                <ValidatorForm onSubmit={handleNewVideo}>\r\n                    <Grid container spacing={3} justify=\"center\">\r\n                        <Grid item xs={12}>\r\n                            <input accept=\"video/mp4\" className={classes.input} id=\"icon-button-file\" type=\"file\" />\r\n                            <label htmlFor=\"icon-button-file\">\r\n                                <Button component=\"span\" color=\"primary\">\r\n                                    Выберите файл\r\n                                </Button>\r\n                            </label>\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextValidator\r\n                                variant=\"standard\"\r\n                                fullWidth\r\n                                onChange={handleChange}\r\n                                label=\"Название\"\r\n                                name=\"name\"\r\n                                autoComplete=\"off\"\r\n                                validators={['required']}\r\n                                errorMessages={['Это поле обязательное']}\r\n                                value={formData.name}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                variant=\"standard\"\r\n                                fullWidth\r\n                                multiline\r\n                                rowsMax={20}\r\n                                rows={4}\r\n                                onChange={handleChange}\r\n                                label=\"Описание\"\r\n                                name=\"about\"\r\n                                autoComplete=\"off\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} lg={5}>\r\n                            <Button\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                            >\r\n                                Сохранить\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n                </ValidatorForm>\r\n                <Backdrop className={classes.backdrop} open={load}>\r\n                    <CircularProgressWithLabel value={progress} />\r\n                </Backdrop>\r\n            </div>\r\n        </Container>\r\n    )\r\n}","import {Typography} from \"@material-ui/core\";\r\nimport React, {useEffect} from \"react\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {useAuthDispatch, useAuthState} from \"../context\";\r\nimport {checkAuth} from \"../context/actions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    font: {\r\n        fontSize: 50\r\n    }\r\n}));\r\n\r\nfunction NotFoundPage() {\r\n    const classes = useStyles();\r\n    const dispatch = useAuthDispatch();\r\n    const userDetails = useAuthState();\r\n    const auth = userDetails.token !== '';\r\n    useEffect(() => checkAuth(dispatch), []);\r\n    return (\r\n        <Container maxWidth=\"sm\">\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h1\" className={classes.font} color=\"textPrimary\">\r\n                    Страница не найдена\r\n                </Typography>\r\n            </div>\r\n        </Container>\r\n\r\n    )\r\n}\r\n\r\nexport default NotFoundPage;","import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport {useAuthState} from \"../../context\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport API from \"../../utils/API\";\r\nimport {useHistory} from \"react-router\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {Divider} from \"@material-ui/core\";\r\nimport {CheckBox} from \"@material-ui/icons\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\n\r\nfunction createData(id,name, views, likes, dislikes, about, isPrivate) {\r\n    return { id ,name, views, likes, dislikes, about, isPrivate };\r\n}\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n    if (b[orderBy] < a[orderBy]) {\r\n        return -1;\r\n    }\r\n    if (b[orderBy] > a[orderBy]) {\r\n        return 1;\r\n    }\r\n    return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n    return order === 'desc'\r\n        ? (a, b) => descendingComparator(a, b, orderBy)\r\n        : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n    const stabilizedThis = array.map((el, index) => [el, index]);\r\n    stabilizedThis.sort((a, b) => {\r\n        const order = comparator(a[0], b[0]);\r\n        if (order !== 0) return order;\r\n        return a[1] - b[1];\r\n    });\r\n    return stabilizedThis.map((el) => el[0]);\r\n}\r\n\r\nconst headCells = [\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Название' },\r\n    { id: 'views', numeric: true, disablePadding: false, label: 'Просмотры' },\r\n    { id: 'likes', numeric: true, disablePadding: false, label: 'Количество лайков' },\r\n    { id: 'dislikes', numeric: true, disablePadding: false, label: 'Количество дизлайков' },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n    const { classes, order, orderBy, onRequestSort } = props;\r\n    const createSortHandler = (property) => (event) => {\r\n        onRequestSort(event, property);\r\n    };\r\n\r\n    return (\r\n        <TableHead>\r\n            <TableRow>\r\n                {headCells.map((headCell) => (\r\n                    <TableCell\r\n                        key={headCell.id}\r\n                        align={headCell.numeric ? 'right' : 'left'}\r\n                        sortDirection={orderBy === headCell.id ? order : false}\r\n                    >\r\n                        <TableSortLabel\r\n                            active={orderBy === headCell.id}\r\n                            direction={orderBy === headCell.id ? order : 'asc'}\r\n                            onClick={createSortHandler(headCell.id)}\r\n                        >\r\n                            {headCell.label}\r\n                            {orderBy === headCell.id ? (\r\n                                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n                            ) : null}\r\n                        </TableSortLabel>\r\n                    </TableCell>\r\n                ))}\r\n                <TableCell align=\"right\">\r\n                    Тип\r\n                </TableCell>\r\n                <TableCell>\r\n                    Действия\r\n                </TableCell>\r\n            </TableRow>\r\n        </TableHead>\r\n    );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n    paper: {\r\n        width: '100%',\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    table: {\r\n        minWidth: 750,\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n}));\r\n\r\nexport default function TableVideosLayout() {\r\n    const classes = useStyles();\r\n    const [order, setOrder] = useState('asc');\r\n    const [orderBy, setOrderBy] = useState('calories');\r\n    const [page, setPage] = useState(0);\r\n    const [rows, setRows] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n    const [currentRow, setCurrentRow] = useState({\r\n        name: '',\r\n        id: 0,\r\n        about: '',\r\n        isPrivate: false\r\n    });\r\n    const userDetails = useAuthState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const rowsPerPage = 8;\r\n    const history = useHistory();\r\n\r\n    const handleRequestSort = (event, property) => {\r\n        const isAsc = orderBy === property && order === 'asc';\r\n        setOrder(isAsc ? 'desc' : 'asc');\r\n        setOrderBy(property);\r\n    };\r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    function loadRows() {\r\n        API.get(\"videos/user/\" + userDetails.user.id)\r\n            .then((response) => {\r\n                    console.log(response.data.data);\r\n                    const r = [];\r\n                    Array.prototype.map.call(response.data.data, function (item) {\r\n                        r.push(createData(item.id, item.name, item.views, item.likes, item.dislikes, item.about, item.isPrivate))\r\n                    })\r\n                    setRows(r);\r\n                },\r\n                (error) => {\r\n                    console.log(error);\r\n                    enqueueSnackbar(\"Произошла ошибка\", {variant: \"error\"});\r\n                })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadRows();\r\n    },[])\r\n\r\n    const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\r\n\r\n    function deleteVideo(id) {\r\n        API.delete(\"videos/\" + id)\r\n            .then((response) => {\r\n                enqueueSnackbar(\"Успешное удаление\", {variant: \"success\"});\r\n                loadRows();\r\n            },\r\n                (error) => {\r\n                    console.log(error);\r\n                    enqueueSnackbar(\"Произошла ошибка при удалении\", {variant: \"error\"});\r\n                })\r\n    }\r\n\r\n    function openEditVideo(row) {\r\n        setCurrentRow(row);\r\n        setOpen(true);\r\n    }\r\n\r\n    function closeEditVideo() {\r\n        setOpen(false);\r\n        loadRows();\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Paper className={classes.paper}>\r\n                <TableContainer>\r\n                    <Table\r\n                        className={classes.table}\r\n                        aria-labelledby=\"tableTitle\"\r\n                        size='medium'\r\n                        aria-label=\"enhanced table\"\r\n                    >\r\n                        <EnhancedTableHead\r\n                            classes={classes}\r\n                            order={order}\r\n                            orderBy={orderBy}\r\n                            onRequestSort={handleRequestSort}\r\n                            rowCount={rows.length}\r\n                        />\r\n                        <TableBody>\r\n                            {stableSort(rows, getComparator(order, orderBy))\r\n                                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                                .map((row, index) => {\r\n\r\n                                    return (\r\n                                        <TableRow\r\n                                            hover\r\n                                            role=\"checkbox\"\r\n                                            tabIndex={-1}\r\n                                            key={row.id}\r\n                                        >\r\n                                            <TableCell style={{cursor: \"pointer\"}} onClick={() => { history.push(\"/video/\" + row.id);}}>{row.name}</TableCell>\r\n                                            <TableCell align=\"right\">{row.views}</TableCell>\r\n                                            <TableCell align=\"right\">{row.likes}</TableCell>\r\n                                            <TableCell align=\"right\">{row.dislikes}</TableCell>\r\n                                            <TableCell align=\"right\">{row.isPrivate === false ? \"Публичное\" : \"Приватное\"}</TableCell>\r\n                                            <TableCell>\r\n                                                <IconButton \r\n                                                    size=\"small\"\r\n                                                    onClick={() => {openEditVideo(row)}}\r\n                                                >\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n                                                <IconButton\r\n                                                    size=\"small\"\r\n                                                    onClick={() => {deleteVideo(row.id)}}>\r\n                                                    <DeleteIcon />\r\n                                                </IconButton>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    );\r\n                                })}\r\n                            {emptyRows > 0 && (\r\n                                <TableRow style={{ height: 53 * emptyRows }}>\r\n                                    <TableCell colSpan={6} />\r\n                                </TableRow>\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n                <TablePagination\r\n                    rowsPerPageOptions={rowsPerPage}\r\n                    component=\"div\"\r\n                    count={rows.length}\r\n                    rowsPerPage={rowsPerPage}\r\n                    page={page}\r\n                    onChangePage={handleChangePage}\r\n                />\r\n            </Paper>\r\n            <EditVideo\r\n                handleClose={closeEditVideo}\r\n                open={open}\r\n                row={currentRow}\r\n                handleChangeInput={(event) => {\r\n                    currentRow[event.target.name] = event.target.value;\r\n                    setCurrentRow({...currentRow});\r\n                }}\r\n                handlePrivate={() => {\r\n                    currentRow.isPrivate = !currentRow.isPrivate;\r\n                    setCurrentRow({...currentRow});\r\n                    console.log(currentRow)\r\n                }}\r\n                handleButton={() => {\r\n                    console.log(currentRow)\r\n                    API.put(`/videos/${currentRow.id}`, currentRow)\r\n                        .then((data) => {\r\n                                enqueueSnackbar(\"Успешно\", { variant: 'success' });\r\n                                closeEditVideo();\r\n                            },\r\n                            (error) => {\r\n                                enqueueSnackbar(\"Изменение не удалось\", { variant: 'error' });\r\n                                closeEditVideo();\r\n                            });\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction EditVideo(props) {\r\n\r\n    return (\r\n        <Dialog open={props.open} onClose={props.handleClose} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">{\"Редактирование видео '\" + props.row.name + \"'\"}</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText>\r\n                    Изменение полей видео\r\n                </DialogContentText>\r\n                <TextField\r\n                    label=\"Название\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    onChange={props.handleChangeInput}\r\n                    name=\"name\"\r\n                    style={{marginBottom: 10}}\r\n                    value={props.row.name}\r\n                >\r\n                </TextField>\r\n                <Divider variant={\"fullWidth\"} style={{marginBottom: 10}}/>\r\n                <TextField\r\n                    label=\"Описание\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    onChange={props.handleChangeInput}\r\n                    name=\"about\"\r\n                    multiline\r\n                    rowsMax={10}\r\n                    value={props.row.about}\r\n                >\r\n                </TextField>\r\n                <FormControlLabel\r\n                    control={<Switch checked={props.row.isPrivate} onChange={props.handlePrivate} name=\"privateVideo\" />}\r\n                    label=\"Приватное видео\"\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={props.handleClose} color=\"primary\">\r\n                    Отмена\r\n                </Button>\r\n                <Button onClick={props.handleButton} color=\"primary\">\r\n                    Применить\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import {Avatar, Container, makeStyles} from \"@material-ui/core\";\r\nimport React, {useState} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {TextValidator, ValidatorForm} from \"react-material-ui-form-validator\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {PhotoCamera} from \"@material-ui/icons\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport {useAuthDispatch, useAuthState} from \"../../context\";\r\nimport API from \"../../utils/API\";\r\nimport {changeUsername} from \"../../context/actions\";\r\n\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n    input: {\r\n        display: 'none',\r\n    },\r\n    flex: {\r\n        display: 'flex',\r\n        alignItems: \"center\",\r\n        justifyContent: 'space-around'\r\n    }\r\n}));\r\n\r\nexport default function EditProfileLayout() {\r\n    const classes = useStyle();\r\n    const userDetails = useAuthState();\r\n    const dispatch = useAuthDispatch();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: '',\r\n        username: userDetails.user.username\r\n    })\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleEditProfile = () => {\r\n        setLoading(true);\r\n        API.put(\"users\", formData)\r\n            .then((response) => {\r\n                console.log(response);\r\n                changeUsername(dispatch, response.data.data);\r\n                enqueueSnackbar(\"Логин успешно изменен\", { variant: \"success\"});\r\n                setLoading(false);\r\n            },\r\n                (error) => {\r\n                console.log(error);\r\n                setLoading(false);\r\n                })\r\n    }\r\n\r\n    const handleChange = (event) => {\r\n        const formData1 = {\r\n            email: formData.email,\r\n            password: formData.password,\r\n            username: formData.username\r\n        };\r\n        formData1[event.target.name] = event.target.value;\r\n        console.log(formData1);\r\n        setFormData(formData1);\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth={\"sm\"}>\r\n            <div className={classes.paper}>\r\n                <ValidatorForm onSubmit={handleEditProfile}>\r\n                    <Grid container spacing={3} justify=\"center\">\r\n                        <Grid item xs={12}>\r\n                            <div className={classes.flex}>\r\n                                <Avatar>A</Avatar>\r\n                                <input accept=\"image/*\" className={classes.input} id=\"icon-button-file\" type=\"file\" />\r\n                                <label htmlFor=\"icon-button-file\">\r\n                                    <IconButton color=\"primary\" size=\"small\" aria-label=\"upload picture\" component=\"span\">\r\n                                        <PhotoCamera />\r\n                                    </IconButton>\r\n                                </label>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextValidator\r\n                                varint=\"standard\"\r\n                                fullWidth\r\n                                onChange={handleChange}\r\n                                label=\"Логин\"\r\n                                name=\"username\"\r\n                                autoComplete=\"off\"\r\n                                validators={['required']}\r\n                                errorMessages={['Это поле обязательное']}\r\n                                value={formData.username}\r\n                                disabled={loading}\r\n                            >\r\n                            </TextValidator>\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                varint=\"standard\"\r\n                                fullWidth\r\n                                label=\"Email\"\r\n                                name=\"email\"\r\n                                disabled\r\n                                value={userDetails.user.email}\r\n                            >\r\n                            </TextField>\r\n                        </Grid>\r\n                        <Grid item xs={12} lg={5}>\r\n                            <Button\r\n                                fullWidth\r\n                                variant=\"outlined\"\r\n                                color=\"primary\"\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                            >\r\n                                Сохранить\r\n                            </Button>\r\n                        </Grid>\r\n                    </Grid>\r\n\r\n                </ValidatorForm>\r\n            </div>\r\n        </Container>\r\n    )\r\n}","import React, {useEffect} from \"react\";\r\nimport {Button, Container, Grid, makeStyles, Typography} from \"@material-ui/core\";\r\nimport {useHistory} from \"react-router\";\r\nimport TableVideosLayout from \"../layouts/profile/TableVideosLayout\";\r\nimport EditProfileLayout from \"../layouts/profile/EditProfileLayout\";\r\nimport {useAuthDispatch} from \"../context\";\r\nimport {checkAuth} from \"../context/actions\";\r\n\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    headers: {\r\n        marginBottom: theme.spacing(2)\r\n    },\r\n    addVideo: {\r\n        marginBottom: theme.spacing(2),\r\n        display: 'flex',\r\n        alignItems: \"center\",\r\n        justifyContent: 'space-between'\r\n    }\r\n}));\r\n\r\nexport default function ProfilePage() {\r\n    const classes = useStyle();\r\n    const dispatch = useAuthDispatch();\r\n    const history = useHistory();\r\n    useEffect(() => checkAuth(dispatch), []);\r\n\r\n    return (\r\n        <Container maxWidth=\"lg\">\r\n            <Grid container className={classes.paper} spacing={4}>\r\n                <Grid item xs={12}>\r\n                    <Typography variant=\"h4\" className={classes.headers} color=\"textPrimary\">\r\n                        Ваш профиль\r\n                    </Typography>\r\n                    <EditProfileLayout />\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <div className={classes.addVideo}>\r\n                        <Typography variant=\"h4\" color=\"textPrimary\">\r\n                            Ваши видео\r\n                        </Typography>\r\n                        <Button color=\"primary\" variant=\"text\" onClick={() => history.push(\"/new\")}>Добавить видео</Button>\r\n                    </div>\r\n                    <TableVideosLayout />\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    )\r\n}","import {useHistory, useLocation} from \"react-router\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport React, {useRef, useState} from \"react\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport API from \"../utils/API\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    form: {\r\n        width: '100%', // Fix IE 11 issue.\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function ResetPasswordPage() {\r\n    const query = useQuery();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n    const passwordRef = useRef(null);\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleReset = () => {\r\n        setLoading(true);\r\n        const data = {\r\n            id: query.get(\"id\"),\r\n            token: query.get(\"token\"),\r\n            newPassword: passwordRef.current.value\r\n        }\r\n        API.put(\"/reset\", data)\r\n            .then((data) => {\r\n                setLoading(false);\r\n                enqueueSnackbar(\"Пароль изменен\", {variant: \"success\"});\r\n                history.push(\"/auth\");\r\n            },\r\n                (error) => {\r\n                error = error.response;\r\n                enqueueSnackbar(error.error, {variant: \"error\"});\r\n                setLoading(false);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"sm\">\r\n            <CssBaseline />\r\n            <div className={classes.paper}>\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Восстановление пароля\r\n                </Typography>\r\n                <form className={classes.form} noValidate>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        margin=\"normal\"\r\n                        fullWidth\r\n                        name=\"new-password\"\r\n                        label=\"Введите новый пароль\"\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        autoComplete=\"new-password\"\r\n                        disabled={loading}\r\n                        inputRef={passwordRef}\r\n                    />\r\n                    <Button\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.submit}\r\n                        onClick={handleReset}\r\n                        disabled={loading}\r\n                    >\r\n                        Сменить пароль\r\n                    </Button>\r\n                </form>\r\n            </div>\r\n        </Container>\r\n    )\r\n}","import {useAuthDispatch, useAuthState} from \"../context\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {checkAuth} from \"../context/actions\";\r\nimport {Avatar, Button, ButtonGroup, Container, Divider, Grid, Typography} from \"@material-ui/core\";\r\nimport PanelCardsVideosLayout from \"../layouts/PanelCardsVideosLayout\";\r\nimport API from \"../utils/API\";\r\nimport {useHistory, useParams} from \"react-router-dom\";\r\nimport Loading from \"../components/Loading\";\r\nimport {useSnackbar} from \"notistack\";\r\nimport Fade from \"@material-ui/core/Fade\";\r\n\r\nexport default function UserPage()\r\n{\r\n    const { userId } = useParams();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const dispatch = useAuthDispatch();\r\n    const userDetails = useAuthState();\r\n    const history = useHistory();\r\n    const [videosData, setVideosData] = useState([]);\r\n    const [userData, setUserData] = useState({\r\n        id: 0,\r\n        name: \"name\",\r\n        isAdmin: false,\r\n        img: \"asd\"\r\n    })\r\n    const [loading, setLoading] = useState(true)\r\n    useEffect(() => checkAuth(dispatch), []);\r\n\r\n    useEffect(() => {\r\n        API.get(\"videos/user/\" + userId)\r\n            .then((response) => {\r\n                    const v = [];\r\n                    Array.prototype.map.call(response.data.data, function (item) {\r\n                        v.push(item)\r\n                    })\r\n                    setVideosData(v);\r\n                    enqueueSnackbar(\"Видео загружены\", {variant: \"info\"});\r\n                    loadUserData();\r\n                }, (error) => {\r\n                    console.log(error);\r\n                    enqueueSnackbar(\"Произошла ошибка\", {variant: \"error\"});\r\n                })\r\n    }, [])\r\n\r\n    function loadUserData() {\r\n        setLoading(true);\r\n        API.get(\"users/\" + userId)\r\n            .then((response) => {\r\n                    setUserData(response.data.data);\r\n                    enqueueSnackbar(\"Данные юзера загружены\", {variant: \"info\"});\r\n                    setLoading(false);\r\n                }, (error) => {\r\n                    enqueueSnackbar(\"Произошла ошибка\", {variant: \"error\"});\r\n                })\r\n    }\r\n\r\n    function handleChangeRole() {\r\n        const data = {\r\n            userId: userId,\r\n            isAdmin: !userData.isAdmin\r\n        }\r\n        console.log(data)\r\n        API.put(\"users/admin\", data)\r\n            .then((response) => {\r\n                enqueueSnackbar(\"Роль именилась\", {variant: \"info\"});\r\n                loadUserData();\r\n            }, () => {\r\n                    enqueueSnackbar(\"Произошла ошибка при смене роли пользователя\", {variant: \"error\"});\r\n            });\r\n    }\r\n\r\n    function handleDeleteUser() {\r\n        API.delete(\"users/\" + userId)\r\n            .then((res) => {\r\n                enqueueSnackbar(\"Пользователь с id = \" + userId + \" удален\", {variant: \"info\"});\r\n                history.push(\"/\");\r\n            }, () => {\r\n                enqueueSnackbar(\"Произошла ошибка при удалении пользователя\", {variant: \"error\"});\r\n            });\r\n    }\r\n\r\n    const main =\r\n        <Container maxWidth={\"lg\"} style={{marginTop: 40}}>\r\n            <Grid container spacing={4} direction=\"column\" justify=\"flex-start\" alignItems=\"center\">\r\n                <Grid item container spacing={3} xs={12} justify=\"flex-end\" alignItems=\"center\">\r\n                    <Grid item container spacing={3} xs={8} justify=\"flex-start\" alignItems=\"center\">\r\n                        <Avatar style={{marginRight:25}}>\r\n                            {userData.name[0].toUpperCase()}\r\n                        </Avatar>\r\n                        <Typography variant=\"h6\" color=\"textPrimary\">\r\n                            {userData.name}\r\n                        </Typography>\r\n                    </Grid>\r\n                    {userDetails.user.isAdmin === true &&\r\n                    <Grid item xs={4} >\r\n                        <ButtonGroup variant=\"outlined\" size=\"small\" color=\"secondary\">\r\n                            <Button onClick={handleChangeRole}>\r\n                                {userData.isAdmin ? \"Убрать права администратора\" : \"Сделать администратором\"}\r\n                            </Button>\r\n                            <Button onClick={handleDeleteUser}>\r\n                                Удалить пользователя\r\n                            </Button>\r\n                        </ButtonGroup>\r\n                    </Grid>\r\n                    }\r\n                </Grid>\r\n                <Grid item sx={12}>\r\n                    <Divider variant=\"fullWidth\" />\r\n                </Grid>\r\n                <Grid item xs={12} container justify=\"flex-start\">\r\n                    <Typography variant=\"h6\" color=\"textPrimary\">\r\n                        Видео пользователя\r\n                    </Typography>\r\n                    <Divider variant=\"fullWidth\" />\r\n                </Grid>\r\n                <Divider variant=\"fullWidth\" color={\"#ffffff\"} />\r\n                <Grid item xs={12}>\r\n                    <Fade>\r\n                        <PanelCardsVideosLayout\r\n                            handleNextPage={() => {}}\r\n                            nextPage={false}\r\n                            videosData={videosData}\r\n                        />\r\n                    </Fade>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n\r\n    return loading ? <Loading /> : main;\r\n}","import {createMuiTheme, ThemeProvider} from \"@material-ui/core/styles\";\r\nimport orange from \"@material-ui/core/colors/orange\";\r\nimport React from \"react\";\r\nimport {Route, Switch} from \"react-router-dom\";\r\nimport VideoPage from \"./pages/VideoPage\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport {AuthProvider, useAuthState} from \"./context\";\r\nimport {SnackbarProvider} from \"notistack\";\r\nimport * as locales from '@material-ui/core/locale';\r\nimport PrimarySearchAppBar from \"./layouts/AppBar\";\r\nimport AuthPage from \"./pages/AuthPage\";\r\nimport NewVideoPage from \"./pages/NewVideoPage\";\r\nimport NotFoundPage from \"./pages/NotFoundPage\";\r\nimport ProfilePage from \"./pages/ProfilePage\";\r\nimport ResetPasswordPage from \"./pages/ResetPasswordPage\";\r\nimport UserPage from \"./pages/UserPage\";\r\nimport pink from \"@material-ui/core/colors/pink\";\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n      primary: orange,\r\n      secondary: pink,\r\n      type: 'dark',\r\n      text: {\r\n          primary: \"#ffffff\",\r\n          secondary: \"#b8b8b8\"\r\n      }\r\n  },\r\n  breakpoints: {\r\n    values: {\r\n      xs: 0,\r\n      sm: 600,\r\n      md: 960,\r\n      lg: 1280,\r\n      xl: 1920\r\n    },\r\n  }\r\n}, locales['ruRU']);\r\n\r\nconst StyledContainer = withStyles({\r\n    root: {\r\n        marginTop: 12\r\n    }\r\n})(Container);\r\n\r\n\r\nfunction Routing() {\r\n    const userDetails = useAuthState();\r\n    const auth = userDetails.token !== '';\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/video/:videoToken\" children={<VideoPage />} />\r\n            <Route exact path=\"/\" children={<HomePage />} />\r\n            {\r\n                !auth && <Route path=\"/auth\" children={<AuthPage />} />\r\n            }\r\n            {\r\n                !auth && <Route path=\"/reset\" children={<ResetPasswordPage />} />\r\n            }\r\n            {\r\n                auth && <Route path=\"/profile\" children={<ProfilePage />} />\r\n            }\r\n            {\r\n                auth && <Route path=\"/new\" children={<NewVideoPage />} />\r\n            }\r\n            {\r\n                auth && <Route path=\"/user/:userId\" children={<UserPage />} />\r\n            }\r\n            <Route children={<NotFoundPage />} />\r\n        </Switch>\r\n    )\r\n}\r\n\r\n\r\nfunction App() {\r\n\r\n    return (\r\n        <AuthProvider>\r\n            <ThemeProvider theme={theme}>\r\n                <SnackbarProvider maxSnack={3}>\r\n                    <PrimarySearchAppBar />\r\n                    <StyledContainer maxWidth=\"lg\">\r\n                        <Routing />\r\n                    </StyledContainer>\r\n                </SnackbarProvider>\r\n            </ThemeProvider>\r\n        </AuthProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'fontsource-roboto';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render((\r\n    <BrowserRouter>\r\n        <App />\r\n    </BrowserRouter>\r\n), document.getElementById('root'));"],"sourceRoot":""}
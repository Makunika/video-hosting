(this["webpackJsonpvideo-hosting-front"]=this["webpackJsonpvideo-hosting-front"]||[]).push([[0],{260:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),i=a(14),s=a.n(i),o=(a(141),a(51)),l=a(173),u=a(312),j=a(121),d=a.n(j),b=a(11),h=a(306),O=a(9),m=a(129),p=a(38),x=a(319),f=a(310),g=a(314),v=a(160),y=a(264),k=a(18),w=a(165),S=a.n(w).a.create({baseURL:"/api/",responseType:"json"});S.interceptors.request.use((function(e){var t=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).token:"";return e.headers.Authorization=""!==t?"Bearer_".concat(t):"",e}));var C=S,N=a(72),P=a.n(N),I=a(309),W=a(265),T=a(315),E=a(316),R=a(317),L=a(318),U=a(313),D=a(16),B=a(305),A=a(357),q=a(122),M=a.n(q),F=a(123),V=a.n(F),z=Object(B.a)((function(e){return{orange:{color:e.palette.getContrastText(M.a[500]),backgroundColor:M.a[500]},purple:{color:e.palette.getContrastText(V.a[500]),backgroundColor:V.a[500]}}}));function G(e){var t,a=e.src,c=e.name,i=z(),s=Object(r.useState)(1!==e.orange?(t=2,Math.floor(Math.random()*Math.floor(t))):0),o=Object(O.a)(s,1)[0];return Object(n.jsx)(A.a,{src:"default.png"!==a?a:"",alt:c[0].toUpperCase(),onClick:e.onClick,style:Object(D.a)({},e.style),className:0===o?i.orange:i.purple,children:c[0].toUpperCase()})}var _=P()((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}));function J(e){var t=_(),a=Object(k.b)().enqueueSnackbar,i=Object(b.f)(),s=Object(r.useState)(e.list.map((function(e){return e.createDate=new Date(e.createDate),e})).sort((function(e,t){return new Date(t.createDate)-new Date(e.createDate)}))),o=Object(O.a)(s,2),l=o[0],u=o[1];return Object(n.jsx)(I.a,{className:t.root,subheader:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(U.a,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),Object(n.jsx)(g.a,{variant:"fullWidth"})]}),children:Array.prototype.map.call(l,(function(r,s){return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsxs)(W.a,{alignItems:"flex-start",children:[Object(n.jsx)(T.a,{children:Object(n.jsx)(G,{src:r.user.img,name:r.user.name,onClick:function(){return i.push("/user/"+r.user.id)},style:{cursor:"pointer"}})}),Object(n.jsx)(E.a,{primary:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("div",{onClick:function(){return i.push("/user/"+r.user.id)},style:{cursor:"pointer",display:"inline"},children:r.user.name}),Object(n.jsx)(p.a,{component:"span",variant:"subtitle2",className:t.inline,color:"textSecondary",style:{marginLeft:15},children:new Date(r.createDate).toLocaleString()})]}),secondary:Object(n.jsx)(p.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary",children:r.text})}),e.isAdmin&&Object(n.jsx)(R.a,{children:Object(n.jsx)(L.a,{edge:"end","aria-label":"delete",onClick:function(){return function(e,t){C.delete("/comments/"+e.id).then((function(e){var n=l.slice(),r=n.splice(t,1);u(n),a("\u041a\u043e\u043c\u043c\u0435\u043d\u0430\u0442\u0440\u0438\u0439 ".concat(r[0].text," \u0443\u0434\u0430\u043b\u0435\u043d"),{variant:"success"})}),(function(e){a("\u041a\u043e\u043c\u043c\u0435\u043d\u0430\u0442\u0440\u0438\u0439 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"warning"})}))}(r,s)},children:Object(n.jsx)(x.a,{})})})]}),s!==l.length-1&&Object(n.jsx)(g.a,{variant:"fullWidth"})]},s)}))})}var H=function(e){var t=e.userId,a=e.videoId,c=e.isAdmin,i=Object(k.b)().enqueueSnackbar,s=e.auth,o=Object(r.useState)([]),l=Object(O.a)(o,2),u=l[0],j=l[1],d=Object(r.useState)(!1),b=Object(O.a)(d,2),p=b[0],x=b[1],g=Object(r.useState)(""),w=Object(O.a)(g,2),S=w[0],N=w[1];function P(){x(!1),C.get("comments/video/"+a).then((function(e){console.log(e.data.data),j(e.data.data),x(!0)}),(function(e){console.log(e.data),i(e.response.data.error,{variant:"error"}),x(!0)}))}return Object(r.useEffect)(P,[]),Object(n.jsx)(m.a,{children:Object(n.jsxs)(h.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",style:{paddingLeft:15,paddingRight:15},spacing:3,children:[s&&Object(n.jsxs)(h.a,{item:!0,xs:!0,children:[Object(n.jsx)(v.a,{variant:"outlined",margin:"normal",fullWidth:!0,multiline:!0,rowsMax:20,rows:4,onChange:function(e){N(e.target.value)},placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",name:"text",value:S,autoComplete:"off"}),Object(n.jsx)(y.a,{color:"primary",variant:"outlined",onClick:function(){var e={text:S,video_id:a,user_id:t};C.post("comments",e).then((function(e){console.log(e.data.data),N(""),i("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d",{variant:"success"}),P()}),(function(e){console.log(e.data),i(e.response.data.error,{variant:"error"})}))},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),Object(n.jsx)(h.a,{item:!0,xs:!0,children:p?Object(n.jsx)(J,{isAdmin:c,list:u}):Object(n.jsx)(f.a,{})})]})})},Q=a(320),$=a(321),K=a(322),X=Object(B.a)({center:{width:"100%"}});var Y=function(){var e=X();return Object(n.jsx)(Q.a,{children:Object(n.jsx)($.a,{children:Object(n.jsx)(K.a,{className:e.center})})})},Z=a(323),ee=Object(B.a)({add:{width:"100%",marginBottom:10},media:{height:140}});function te(e){var t=ee(),a=Object(b.f)();return Object(n.jsx)(Q.a,{className:t.add,children:Object(n.jsx)(Z.a,{onClick:function(){a.push("/video/"+e.item.id),a.go(0)},children:Object(n.jsxs)($.a,{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",children:e.item.name}),Object(n.jsx)(p.a,{gutterBottom:!0,variant:"body2",children:e.item.about}),Object(n.jsx)(p.a,{variant:"subtitle2",children:e.item.user.name})]})})})}var ae=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(O.a)(i,2),o=s[0],l=s[1];Object(r.useEffect)((function(){C.get("/videos?size=5&sort=name,asc").then((function(e){console.log(e.data.content),l(e.data.content),c(!0)}),(function(e){var t=e.response;console.log(t)})).catch((function(){console.log("WOOOOW")}))}),[]);var u=Object(n.jsxs)("div",{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",color:"textSecondary",children:"\u0414\u0440\u0443\u0433\u0438\u0435 \u0432\u0438\u0434\u0435\u043e"}),Array.prototype.map.call(o,(function(e){return Object(n.jsx)(te,{item:e})}))]});return a?u:Object(n.jsx)(Y,{})},ne=a(324),re=a(325),ce=a(326),ie=a(327),se=a(25),oe=a.n(se),le=a(45);function ue(e,t){return je.apply(this,arguments)}function je(){return(je=Object(le.a)(oe.a.mark((function e(t,a){var n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),n=!1,t({type:"REQUEST_LOGIN"}),e.next=5,C.post("/auth",a).then((function(e){var a=e.data;if(console.log(a),a.username)return t({type:"LOGIN_SUCCESS",payload:a}),console.log(a),localStorage.setItem("currentUser",JSON.stringify(a)),void(n=!0);t({type:"LOGIN_ERROR",error:a.errors[0]}),console.log(a),n=!1}),(function(e){var a=e.response;t({type:"LOGIN_ERROR",error:a.data}),console.log(a),n=!1}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return be.apply(this,arguments)}function be(){return(be=Object(le.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT"}),localStorage.removeItem("currentUser"),localStorage.removeItem("token");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){C.put("/auth/check","").then((function(){console.log("auth ok!")})).catch((function(t){console.log("auth error!"),e({type:"LOGOUT"}),localStorage.removeItem("currentUser"),localStorage.removeItem("token")}))}var Oe={user:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):"",token:localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")).token:"",loading:!1,errorMessage:null};console.log(Oe);var me=function(e,t){switch(t.type){case"REQUEST_LOGIN":return Object(D.a)(Object(D.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(D.a)(Object(D.a)({},e),{},{user:t.payload,token:t.payload.token,loading:!1});case"LOGOUT":return Object(D.a)(Object(D.a)({},e),{},{user:"",token:""});case"LOGIN_ERROR":return Object(D.a)(Object(D.a)({},e),{},{loading:!1,errorMessage:t.error});default:throw new Error("Unhandled action type: ".concat(t.type))}},pe=c.a.createContext(),xe=c.a.createContext();function fe(){var e=c.a.useContext(pe);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}function ge(){var e=c.a.useContext(xe);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}var ve=function(e){var t=e.children,a=Object(r.useReducer)(me,Oe),c=Object(O.a)(a,2),i=c[0],s=c[1];return Object(n.jsx)(pe.Provider,{value:i,children:Object(n.jsx)(xe.Provider,{value:s,children:t})})},ye=a(328),ke=Object(B.a)({video:{width:"100%",outline:"none"}});var we=function(e){var t=Object(r.useState)(e.videoToken),a=Object(O.a)(t,1)[0],i=fe(),s=""!==i.token,o=ke(),l=Object(k.b)().enqueueSnackbar,u=Object(b.f)(),j=Object(r.useState)(!1),d=Object(O.a)(j,2),h=d[0],m=d[1],x=Object(r.useState)({id:0,video:"unknow",user:{id:0,name:"name",img:"img"}}),f=Object(O.a)(x,2),v=f[0],w=f[1],S=Object(r.useState)({likes:0,dislikes:0}),N=Object(O.a)(S,2),P=N[0],I=N[1],W=Object(r.useState)(0),T=Object(O.a)(W,2),E=T[0],R=T[1],U=Object(r.useState)(a),D=Object(O.a)(U,1)[0],B=Object(r.useState)(!1),A=Object(O.a)(B,2),q=A[0],M=A[1];function F(e){M(!0);var t={videoId:a,userId:i.user.id,mark:e};C.post("/marks/",t).then((function(e){var t=e.data.data;M(!1),I({likes:t.likes,dislikes:t.dislikes}),R(t.markOwner)}),(function(e){l(e.response.data.error,{variant:"error"}),M(!1),R(0),M(!1)}))}Object(r.useEffect)((function(){C.get("/videos/"+D).then((function(e){w(e.data.data),m(!0),M(!0),s?C.get("/marks/".concat(a,"/user/").concat(i.user.id)).then((function(e){var t=e.data.data;M(!1),I({likes:t.likes,dislikes:t.dislikes}),R(t.markOwner)}),(function(e){l(e.response.data.error,{variant:"error"})})):C.get("/marks/".concat(a)).then((function(e){var t=e.data.data;M(!1),I({likes:t.likes,dislikes:t.dislikes}),R(0)}),(function(e){l(e.response.data.error,{variant:"error"})}))}),(function(e){l(e.response.data.error,{variant:"error"})})).catch((function(){}))}),[]);var V=Object(n.jsxs)(Q.a,{children:[Object(n.jsx)(ne.a,{children:Object(n.jsx)("video",{className:o.video,controls:!0,children:Object(n.jsx)("source",{src:"http://localhost:8080/api/file/videos/"+v.video,type:"video/mp4"})})}),Object(n.jsx)(re.a,{title:v.name,subheader:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"subtitle1",children:v.views+" \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432"}),Object(n.jsx)(p.a,{variant:"subtitle2",children:new Date(v.createDate).toLocaleDateString()}),v.isPrivate&&Object(n.jsx)(p.a,{variant:"subtitle2",children:"\u042d\u0442\u043e \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e"})]}),action:Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(L.a,{color:1===E?"primary":"default",disabled:!s||q,onClick:function(){F(1===E?0:1)},children:Object(n.jsx)(ce.a,{})}),Object(n.jsx)(p.a,{variant:"subtitle2",style:{display:"inline"},color:"textSecondary",children:P.likes}),Object(n.jsx)(L.a,{color:-1===E?"primary":"default",disabled:!s||q,onClick:function(){F(-1===E?0:-1)},children:Object(n.jsx)(ie.a,{})}),Object(n.jsx)(p.a,{variant:"subtitle2",color:"textSecondary",style:{display:"inline"},children:P.dislikes})]})}),Object(n.jsx)(g.a,{variant:"middle"}),Object(n.jsx)(re.a,{avatar:Object(n.jsx)(G,{src:v.user.img,name:v.user.name,onClick:function(){return u.push("/user/"+v.user.id)},style:{cursor:"pointer"}}),title:Object(n.jsx)("div",{onClick:function(){return u.push("/user/"+v.user.id)},style:{cursor:"pointer"},children:v.user.name})}),Object(n.jsx)($.a,{children:Object(n.jsx)(p.a,{children:v.about})}),!0===i.user.isAdmin&&Object(n.jsx)(ye.a,{children:Object(n.jsx)(y.a,{color:"secondary",onClick:function(){C.delete("videos/"+a).then((function(e){l("\u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",{variant:"success"}),u.push("/")}),(function(e){console.log(e),l(e.response.data.error,{variant:"error"})}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"})})]});return h?V:Object(n.jsx)(Y,{})};var Se=function(){var e=Object(b.h)().videoToken,t=ge(),a=fe(),c=""!==a.token;return Object(r.useEffect)((function(){return he(t)}),[]),Object(n.jsxs)(h.a,{container:!0,spacing:4,justify:"center",children:[Object(n.jsx)(h.a,{item:!0,lg:11,md:9,xs:12,children:Object(n.jsx)(we,{videoToken:e})}),Object(n.jsx)(h.a,{item:!0,xs:12,md:6,lg:7,sm:7,children:Object(n.jsx)(H,{isAdmin:!0===a.user.isAdmin,videoId:e,userId:a.user.id,auth:c})}),Object(n.jsx)(h.a,{item:!0,xs:10,md:3,lg:4,sm:5,children:Object(n.jsx)(ae,{})})]})},Ce=P()({card:{width:355},card_img:{width:"100%",minHeight:200,objectFit:"contain"}});function Ne(e){var t=Ce(),a=Object(b.f)();return Object(n.jsx)(h.a,{item:!0,xs:"auto",children:Object(n.jsx)(Q.a,{className:t.card,children:Object(n.jsx)(Z.a,{onClick:function(){return a.push("/video/"+e.item.id)},children:Object(n.jsxs)($.a,{children:[Object(n.jsx)(p.a,{gutterBottom:!0,variant:"h5",children:e.item.name}),Object(n.jsx)(p.a,{variant:"subtitle2",children:"\u0410\u0432\u0442\u043e\u0440: "+e.item.user.name}),Object(n.jsx)(h.a,{container:!0,justify:"flex-end",wrap:"nowrap",alignItems:"center",spacing:1,children:Object(n.jsx)(h.a,{item:!0,children:Object(n.jsx)(p.a,{variant:"body2",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432: "+e.item.views})})})]})})})})}function Pe(e){var t=e.videosData,a=e.handleNextPage,r=e.nextPage;return Object(n.jsxs)(h.a,{container:!0,spacing:4,justify:"flex-start",alignItems:"center",children:[0===t.length&&Object(n.jsx)(h.a,{container:!0,item:!0,xs:12,justify:"center",children:Object(n.jsx)(p.a,{variant:"h5",color:"textSecondary",children:"\u0412\u0438\u0434\u0435\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})}),0!==t.length&&Object(n.jsxs)(c.a.Fragment,{children:[Array.prototype.map.call(t,(function(e){return Object(n.jsx)(Ne,{item:e},e.id)})),r&&Object(n.jsx)(h.a,{container:!0,item:!0,xs:12,justify:"center",children:Object(n.jsx)(y.a,{variant:"outlined",onClick:a,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})})]})]})}var Ie=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)([]),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),d=j[0],h=j[1],m=Object(r.useState)(!1),p=Object(O.a)(m,2),x=p[0],f=p[1],g=new URLSearchParams(Object(b.g)().search),v=Object(r.useState)(g.get("name")),y=Object(O.a)(v,1)[0],k=Object(r.useState)(g.get("sort")),w=Object(O.a)(k,1)[0];return Object(r.useEffect)((function(){var e=y?"/videos?page=".concat(d,"&name=").concat(y):w?"/videos?page=".concat(d,"&sort=views,desc"):"/videos?page=".concat(d);C.get(e).then((function(e){var t=o.slice();Array.prototype.map.call(e.data.content,(function(e){t.push(e)})),l(t),c(!0),f(d+1!==e.data.totalPages)}),(function(e){var t=e.response;console.log(t)})).catch((function(){}))}),[d]),a?Object(n.jsx)(Pe,{handleNextPage:function(){h(d+1)},nextPage:x,videosData:o}):Object(n.jsx)(Y,{})};var We=function(){var e=ge();return Object(r.useEffect)((function(){return he(e)}),[]),Object(n.jsx)(Ie,{})},Te=a(172),Ee=a.n(Te),Re=a(329),Le=a(171),Ue=a(46),De=a(335),Be=a(336),Ae=a(332),qe=a(331),Me=a(174),Fe=a(127),Ve=a.n(Fe),ze=a(167),Ge=a.n(ze),_e=a(333),Je=a(334),He=a(178),Qe=a(166),$e=a.n(Qe),Ke=a(108),Xe=a(119),Ye=a.n(Xe),Ze=a(330),et=P()((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",maxWidth:400,background:"#ffa82b"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}})),tt=Object(l.a)({palette:{primary:Ke.a,secondary:Ke.a,info:Ye.a}});function at(){var e=et(),t=new URLSearchParams(Object(b.g)().search),a=Object(r.useState)(t.get("name")?t.get("name"):""),c=Object(O.a)(a,2),i=c[0],s=c[1],o=Object(b.f)();return Object(n.jsx)(u.a,{theme:tt,children:Object(n.jsxs)(Re.a,{component:"form",className:e.root,onSubmit:function(e){e.preventDefault(),i&&!/^\s*$/.test(i)?(o.push("/?name="+i),o.go(0)):s("")},children:[Object(n.jsx)(He.a,{className:e.input,placeholder:"\u041f\u043e\u0438\u0441\u043a",inputProps:{"aria-label":"\u041f\u043e\u0438\u0441\u043a"},onChange:function(e){s(e.target.value)},value:i}),Object(n.jsx)(L.a,{color:"inherit",type:"submit",className:e.iconButton,"aria-label":"search",children:Object(n.jsx)($e.a,{})}),Object(n.jsx)(g.a,{className:e.divider,orientation:"vertical"}),Object(n.jsx)(L.a,{color:"inherit",className:e.iconButton,"aria-label":"directions",onClick:function(){o.push("/?sort=views"),window.location.reload()},children:Object(n.jsx)(Ze.a,{fontSize:"small"})})]})})}var nt=Object(B.a)((function(e){var t,a;return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:(t={display:"none"},Object(Ue.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(Ue.a)(t,"cursor","pointer"),t),titleOne:(a={display:"block"},Object(Ue.a)(a,e.breakpoints.up("sm"),{display:"none"}),Object(Ue.a)(a,"cursor","pointer"),a),search:Object(Ue.a)({marginRight:e.spacing(2),marginLeft:e.spacing(2),width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),sectionDesktop:Object(Ue.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(Ue.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function rt(){var e=nt(),t=ge(),a=fe(),i=""!==a.token;Object(r.useEffect)((function(){return he(t)}),[]);var s=c.a.useState(null),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Boolean(l),d=Object(b.f)(),h=function(e){i?d.push("/profile"):d.push("/auth"),m()},m=function(){u(null)},x=function(){var e=Object(le.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t);case 2:m();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){i&&d.push("/new"),m()},g="primary-search-account-menu",v="primary-search-account-menu-mobile",y=Object(n.jsxs)(Me.a,{anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},id:v,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:m,children:[i&&Object(n.jsxs)(qe.a,{onClick:f,children:[Object(n.jsx)(L.a,{color:"inherit",children:Object(n.jsx)(Ae.a,{color:"secondary",children:Object(n.jsx)(_e.a,{})})}),Object(n.jsx)("p",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"})]}),Object(n.jsxs)(qe.a,{onClick:h,children:[Object(n.jsx)(L.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(n.jsx)(Ve.a,{})}),Object(n.jsx)("p",{children:"Profile"})]}),i&&Object(n.jsxs)(qe.a,{onClick:x,children:[Object(n.jsx)(L.a,{"aria-label":"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(n.jsx)(Je.a,{})}),Object(n.jsx)("p",{children:"Exit"})]})]});return Object(n.jsxs)("div",{className:e.grow,children:[Object(n.jsx)(De.a,{position:"static",children:Object(n.jsxs)(Be.a,{children:[Object(n.jsx)(p.a,{className:e.title,variant:"h6",noWrap:!0,onClick:function(){var e="/"===window.location.pathname;d.push("/"),e&&d.go(0)},children:"Tronica"}),Object(n.jsx)(p.a,{className:e.titleOne,variant:"h5",onClick:function(){var e="/"===window.location.pathname;d.push("/"),e&&d.go(0)},children:"T"}),Object(n.jsx)("div",{className:e.search,children:Object(n.jsx)(at,{})}),Object(n.jsx)("div",{className:e.grow}),Object(n.jsxs)("div",{className:e.sectionDesktop,children:[i&&Object(n.jsx)(L.a,{"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0432\u0438\u0434\u0435\u043e",color:"inherit",onClick:f,children:Object(n.jsx)(Ae.a,{color:"secondary",children:Object(n.jsx)(_e.a,{})})}),Object(n.jsx)(L.a,{"aria-label":"\u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442","aria-controls":g,"aria-haspopup":"true",onClick:h,color:"inherit",children:i?Object(n.jsx)(G,{src:a.user.img,name:a.user.username,style:{height:30,width:30},orange:1}):Object(n.jsx)(Ve.a,{})}),i&&Object(n.jsx)(L.a,{edge:"end","aria-label":"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430","aria-controls":g,"aria-haspopup":"true",onClick:x,color:"inherit",children:Object(n.jsx)(Je.a,{})})]}),Object(n.jsx)("div",{className:e.sectionMobile,children:Object(n.jsx)(L.a,{"aria-label":"show more","aria-controls":v,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit",children:Object(n.jsx)(Ge.a,{})})})]})}),y]})}var ct=a(337),it=a(338),st=a(339),ot=a(340),lt=a(341),ut=a(342),jt=a(28),dt=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},input:{WebkitBoxShadow:"0 0 0 1000px #303030 inset"}}}));function bt(e){var t=dt(),a=Object(b.f)(),c=Object(k.b)().enqueueSnackbar,i=Object(r.useState)(!1),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)({login:"",password:""}),j=Object(O.a)(u,2),d=j[0],m=j[1],x=ge(),f=fe().loading,g=function(){var e=Object(le.a)(oe.a.mark((function e(t){var n,r,i;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n=d.login,r=d.password,e.next=6,ue(x,{username:n,password:r});case 6:i=e.sent,console.log("alo",i),i?(c("\u0412\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b!",{variant:"success"}),a.push("/")):c("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c",{variant:"error"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t={password:d.password,login:d.login};t[e.target.name]=e.target.value,m(t)};return Object(n.jsxs)(Re.a,{maxWidth:"sm",children:[Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(p.a,{component:"h1",variant:"h5",color:"textPrimary",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)(jt.ValidatorForm,{className:t.form,onSubmit:g,children:[Object(n.jsx)(jt.TextValidator,{variant:"outlined",margin:"normal",fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"username",autoFocus:!0,disabled:f,validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:d.login,onChange:v,inputProps:{className:t.input}}),Object(n.jsx)(jt.TextValidator,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",disabled:f,validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:d.password,onChange:v,inputProps:{className:t.input}}),Object(n.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,type:"submit",disabled:f,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(n.jsxs)(h.a,{container:!0,children:[Object(n.jsx)(h.a,{item:!0,xs:!0,children:Object(n.jsx)(ct.a,{style:{cursor:"pointer"},variant:"body2",onClick:function(){l(!0)},children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})}),Object(n.jsx)(h.a,{item:!0,children:Object(n.jsx)(ct.a,{style:{cursor:"pointer"},variant:"body2",onClick:function(){return e.handleLink()},children:"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]})]}),Object(n.jsx)(ht,{handleClose:function(){l(!1)},open:o})]})}function ht(e){var t=Object(k.b)().enqueueSnackbar,a=Object(r.useRef)(null),c=function(){var n=Object(le.a)(oe.a.mark((function n(){var r;return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={email:a.current.value},n.next=3,C.post("reset",r).then((function(e){t("\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",{variant:"success"})}),(function(e){t("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",{variant:"error"})}));case 3:e.handleClose();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(n.jsxs)(it.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(st.a,{id:"form-dialog-title",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(n.jsxs)(ot.a,{children:[Object(n.jsx)(lt.a,{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u044e \u043f\u043e\u0447\u0442\u0443 \u0434\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(n.jsx)(v.a,{autoFocus:!0,margin:"dense",id:"name",inputRef:a,label:"Email",type:"email",autoComplete:"email",fullWidth:!0})]}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(y.a,{onClick:e.handleClose,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(n.jsx)(y.a,{onClick:c,color:"primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}var Ot=a(343),mt=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},input:{WebkitBoxShadow:"0 0 0 1000px #303030 inset"}}}));function pt(e){var t=mt(),a=Object(k.b)().enqueueSnackbar,c=Object(r.useState)({email:"",password:"",login:""}),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(r.useState)(!1),u=Object(O.a)(l,2),j=u[0],d=u[1],b=function(e){var t={email:s.email,password:s.password,login:s.login};t[e.target.name]=e.target.value,o(t)};return Object(n.jsxs)(Re.a,{maxWidth:"sm",children:[Object(n.jsx)(Ot.a,{}),Object(n.jsxs)("div",{className:t.paper,children:[Object(n.jsx)(p.a,{component:"h1",variant:"h5",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(n.jsxs)(jt.ValidatorForm,{className:t.form,onSubmit:function(){d(!0);var t={username:s.login,email:s.email,password:s.password};C.post("register",t).then((function(t){d(!1),a("\u0412\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",{variant:"success"}),e.handleLink()}),(function(e){d(!1);var t=e.response.data;a(t.error,{variant:"error"}),console.log(t)}))},children:[Object(n.jsxs)(h.a,{container:!0,spacing:2,children:[Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(jt.TextValidator,{variant:"outlined",fullWidth:!0,onChange:b,label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"username",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:s.login,disabled:j,inputProps:{className:t.input}})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(jt.TextValidator,{variant:"outlined",fullWidth:!0,onChange:b,label:"Email",name:"email",autoComplete:"email",validators:["required","isEmail"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435","\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442"],value:s.email,disabled:j,inputProps:{className:t.input}})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(jt.TextValidator,{variant:"outlined",fullWidth:!0,onChange:b,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"new-password",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:s.password,disabled:j,inputProps:{className:t.input}})})]}),Object(n.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:j,className:t.submit,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(n.jsx)(h.a,{container:!0,justify:"flex-end",children:Object(n.jsx)(h.a,{item:!0,children:Object(n.jsx)(ct.a,{style:{cursor:"pointer"},variant:"body2",onClick:function(){return e.handleLink()},children:"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? \u0412\u043e\u0439\u0442\u0438"})})})]})]})]})}var xt=function(){var e=Object(r.useState)(!0),t=Object(O.a)(e,2),a=t[0],i=t[1];function s(){i(!a)}return Object(n.jsx)(c.a.Fragment,{children:a?Object(n.jsx)(bt,{handleLink:s}):Object(n.jsx)(pt,{handleLink:s})})},ft=a(266),gt=a(355),vt=a(344),yt=a(356);function kt(e){return Object(n.jsxs)(gt.a,{position:"relative",display:"inline-flex",children:[Object(n.jsx)(f.a,Object(D.a)({variant:"determinate"},e)),Object(n.jsx)(gt.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",children:Object(n.jsx)(p.a,{variant:"caption",component:"div",children:"".concat(Math.round(e.value),"%")})})]})}var wt=Object(B.a)((function(e){return{input:{display:"none"},paper:{marginTop:e.spacing(3)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function St(){var e=wt(),t=Object(k.b)().enqueueSnackbar,a=fe(),i=Object(b.f)(),s=c.a.useState(!1),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)(0),d=Object(O.a)(j,2),m=d[0],p=d[1],x=Object(r.useState)({name:"",about:"",isPrivate:!1}),f=Object(O.a)(x,2),g=f[0],w=f[1],S=function(e){g[e.target.name]=e.target.value,w(Object(D.a)({},g))},N=function(){var e=Object(le.a)(oe.a.mark((function e(){var n;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),(n=new FormData).append("name",g.name),n.append("about",g.about),n.append("userId",a.user.id),n.append("isPrivate",(!1).toString()),n.append("file",document.getElementById("icon-button-file").files[0]),e.next=9,C.post("file/videos",n,{onUploadProgress:function(e){var t=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");null!==t&&p(Math.round(100*e.loaded/t))}}).then((function(e){console.log(e.data),t("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430",{variant:"success"}),u(!1),p(0),i.push("/video/"+e.data.data.id)}),(function(e){t(e.response.data.error,{variant:"error"}),u(!1),p(0)})).catch((function(e){console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(Re.a,{maxWidth:"sm",children:Object(n.jsxs)("div",{className:e.paper,children:[Object(n.jsx)(jt.ValidatorForm,{onSubmit:N,children:Object(n.jsxs)(h.a,{container:!0,spacing:3,justify:"center",children:[Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsx)("input",{accept:"video/mp4",className:e.input,id:"icon-button-file",type:"file"}),Object(n.jsx)("label",{htmlFor:"icon-button-file",children:Object(n.jsx)(y.a,{component:"span",color:"primary",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b"})})]}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(jt.TextValidator,{variant:"standard",fullWidth:!0,onChange:S,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",autoComplete:"off",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:g.name})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(v.a,{variant:"standard",fullWidth:!0,multiline:!0,rowsMax:20,rows:4,onChange:S,label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"about",autoComplete:"off"})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(vt.a,{control:Object(n.jsx)(yt.a,{checked:g.isPrivate,onChange:function(){g.isPrivate=!g.isPrivate,w(Object(D.a)({},g))},name:"privateVideo"}),label:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e",color:"textPrimary"})}),Object(n.jsx)(h.a,{item:!0,xs:12,lg:5,children:Object(n.jsx)(y.a,{fullWidth:!0,variant:"outlined",color:"primary",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})}),Object(n.jsx)(ft.a,{className:e.backdrop,open:l,children:Object(n.jsx)(kt,{value:m})})]})})}var Ct=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},font:{fontSize:50}}}));var Nt=function(){var e=Ct(),t=ge();return fe().token,Object(r.useEffect)((function(){return he(t)}),[]),Object(n.jsx)(Re.a,{maxWidth:"sm",children:Object(n.jsx)("div",{className:e.paper,children:Object(n.jsx)(p.a,{component:"h1",variant:"h1",className:e.font,color:"textPrimary",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})})},Pt=a(349),It=a(350),Wt=a(347),Tt=a(348),Et=a(345),Rt=a(354),Lt=a(346),Ut=a(359),Dt=a(170),Bt=a.n(Dt),At=a(169),qt=a.n(At);function Mt(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function Ft(e,t){return"desc"===e?function(e,a){return Mt(e,a,t)}:function(e,a){return-Mt(e,a,t)}}function Vt(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var zt=[{id:"name",numeric:!1,disablePadding:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"},{id:"views",numeric:!0,disablePadding:!1,label:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b"},{id:"likes",numeric:!0,disablePadding:!1,label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u0430\u0439\u043a\u043e\u0432"},{id:"dislikes",numeric:!0,disablePadding:!1,label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u0438\u0437\u043b\u0430\u0439\u043a\u043e\u0432"}];function Gt(e){var t=e.classes,a=e.order,r=e.orderBy,c=e.onRequestSort;return Object(n.jsx)(Et.a,{children:Object(n.jsxs)(Lt.a,{children:[zt.map((function(e){return Object(n.jsx)(Wt.a,{align:e.numeric?"right":"left",sortDirection:r===e.id&&a,children:Object(n.jsxs)(Ut.a,{active:r===e.id,direction:r===e.id?a:"asc",onClick:(i=e.id,function(e){c(e,i)}),children:[e.label,r===e.id?Object(n.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var i})),Object(n.jsx)(Wt.a,{align:"right",children:"\u0422\u0438\u043f"}),Object(n.jsx)(Wt.a,{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})})}var _t=Object(B.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Jt(){var e=_t(),t=Object(r.useState)("asc"),a=Object(O.a)(t,2),c=a[0],i=a[1],s=Object(r.useState)("calories"),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)(0),d=Object(O.a)(j,2),h=d[0],p=d[1],x=Object(r.useState)([]),f=Object(O.a)(x,2),g=f[0],v=f[1],y=Object(r.useState)(!1),w=Object(O.a)(y,2),S=w[0],N=w[1],P=Object(r.useState)({name:"",id:0,about:"",isPrivate:!1}),I=Object(O.a)(P,2),W=I[0],T=I[1],E=fe(),R=Object(k.b)().enqueueSnackbar,U=Object(b.f)();function B(){C.get("videos/user/"+E.user.id).then((function(e){console.log(e.data.data);var t=[];Array.prototype.map.call(e.data.data,(function(e){var a,n,r,c,i,s,o;t.push((a=e.id,n=e.name,r=e.views,c=e.likes,i=e.dislikes,s=e.about,o=e.isPrivate,{id:a,name:n,views:r,likes:c,dislikes:i,about:s,isPrivate:o}))})),v(t)}),(function(e){console.log(e),R(e.response.data.error,{variant:"error"})}))}Object(r.useEffect)((function(){B()}),[]);var A=8-Math.min(8,g.length-8*h);function q(){N(!1),B()}return Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsxs)(m.a,{className:e.paper,children:[Object(n.jsx)(Tt.a,{children:Object(n.jsxs)(Pt.a,{className:e.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",children:[Object(n.jsx)(Gt,{classes:e,order:c,orderBy:l,onRequestSort:function(e,t){i(l===t&&"asc"===c?"desc":"asc"),u(t)},rowCount:g.length}),Object(n.jsxs)(It.a,{children:[Vt(g,Ft(c,l)).slice(8*h,8*h+8).map((function(e,t){return Object(n.jsxs)(Lt.a,{hover:!0,role:"checkbox",tabIndex:-1,children:[Object(n.jsx)(Wt.a,{style:{cursor:"pointer"},onClick:function(){U.push("/video/"+e.id)},children:e.name}),Object(n.jsx)(Wt.a,{align:"right",children:e.views}),Object(n.jsx)(Wt.a,{align:"right",children:e.likes}),Object(n.jsx)(Wt.a,{align:"right",children:e.dislikes}),Object(n.jsx)(Wt.a,{align:"right",children:!1===e.isPrivate?"\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0435":"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435"}),Object(n.jsxs)(Wt.a,{children:[Object(n.jsx)(L.a,{size:"small",onClick:function(){!function(e){T(e),N(!0)}(e)},children:Object(n.jsx)(qt.a,{})}),Object(n.jsx)(L.a,{size:"small",onClick:function(){var t;t=e.id,C.delete("videos/"+t).then((function(e){R("\u0423\u0441\u043f\u0435\u0448\u043d\u043e\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",{variant:"success"}),B()}),(function(e){console.log(e),R(e.response.data.error,{variant:"error"})}))},children:Object(n.jsx)(Bt.a,{})})]})]},e.id)})),A>0&&Object(n.jsx)(Lt.a,{style:{height:53*A},children:Object(n.jsx)(Wt.a,{colSpan:6})})]})]})}),Object(n.jsx)(Rt.a,{rowsPerPageOptions:8,component:"div",count:g.length,rowsPerPage:8,page:h,onChangePage:function(e,t){p(t)}})]}),Object(n.jsx)(Ht,{handleClose:q,open:S,row:W,handleChangeInput:function(e){W[e.target.name]=e.target.value,T(Object(D.a)({},W))},handlePrivate:function(){W.isPrivate=!W.isPrivate,T(Object(D.a)({},W)),console.log(W)},handleButton:function(){console.log(W),C.put("/videos/".concat(W.id),W).then((function(e){R("\u0423\u0441\u043f\u0435\u0448\u043d\u043e",{variant:"success"}),q()}),(function(e){R("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c",{variant:"error"}),q()}))}})]})}function Ht(e){return Object(n.jsxs)(it.a,{open:e.open,onClose:e.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(st.a,{id:"form-dialog-title",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0438\u0434\u0435\u043e '"+e.row.name+"'"}),Object(n.jsxs)(ot.a,{children:[Object(n.jsx)(lt.a,{children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439 \u0432\u0438\u0434\u0435\u043e"}),Object(n.jsx)(v.a,{label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",variant:"outlined",fullWidth:!0,onChange:e.handleChangeInput,name:"name",style:{marginBottom:10},value:e.row.name}),Object(n.jsx)(g.a,{variant:"fullWidth",style:{marginBottom:10}}),Object(n.jsx)(v.a,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",variant:"outlined",fullWidth:!0,onChange:e.handleChangeInput,name:"about",multiline:!0,rowsMax:10,value:e.row.about}),Object(n.jsx)(vt.a,{control:Object(n.jsx)(yt.a,{checked:e.row.isPrivate,onChange:e.handlePrivate,name:"privateVideo"}),label:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0435 \u0432\u0438\u0434\u0435\u043e"})]}),Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(y.a,{onClick:e.handleClose,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(n.jsx)(y.a,{onClick:e.handleButton,color:"primary",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})}var Qt=a(351),$t=Object(B.a)((function(e){return{input:{display:"none"},flex:{display:"flex",alignItems:"center",justifyContent:"space-around"}}}));function Kt(){var e=$t(),t=fe(),a=ge(),c=Object(k.b)().enqueueSnackbar,i=Object(r.useState)({email:"",password:"",username:t.user.username,img:t.user.img}),s=Object(O.a)(i,2),o=s[0],l=s[1],u=Object(r.useState)(!1),j=Object(O.a)(u,2),d=j[0],b=j[1];return Object(n.jsx)(Re.a,{maxWidth:"sm",children:Object(n.jsx)("div",{className:e.paper,children:Object(n.jsx)(jt.ValidatorForm,{onSubmit:function(){b(!0),C.put("users",o).then((function(e){console.log(e),function(e,t){e({type:"LOGIN_SUCCESS",payload:t}),localStorage.setItem("currentUser",JSON.stringify(t))}(a,e.data.data),c("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d",{variant:"success"}),b(!1)}),(function(e){c(e.response.data.error,{variant:"error"}),b(!1)}))},children:Object(n.jsxs)(h.a,{container:!0,spacing:3,justify:"center",children:[Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsxs)("div",{className:e.flex,children:[Object(n.jsx)(G,{src:o.img,name:t.user.username}),Object(n.jsx)("input",{accept:"image/*",className:e.input,id:"icon-button-file",type:"file",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.readAsDataURL(t),b(!0),a.onload=function(){l(Object(D.a)(Object(D.a)({},o),{},{img:a.result})),b(!1)},a.onerror=function(e){c("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u043a\u043e\u0434\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438",{variant:"warning"}),b(!1)}}}),Object(n.jsx)("label",{htmlFor:"icon-button-file",children:Object(n.jsx)(L.a,{color:"primary",size:"small","aria-label":"upload picture",component:"span",disabled:d,children:Object(n.jsx)(Qt.a,{})})})]})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(jt.TextValidator,{varint:"standard",fullWidth:!0,onChange:function(e){var t=Object(D.a)(Object(D.a)({},o),{},{email:o.email,password:o.password,username:o.username});t[e.target.name]=e.target.value,console.log(t),l(t)},label:"\u041b\u043e\u0433\u0438\u043d",name:"username",autoComplete:"off",validators:["required"],errorMessages:["\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"],value:o.username,disabled:d})}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(v.a,{varint:"standard",fullWidth:!0,label:"Email",name:"email",disabled:!0,value:t.user.email})}),Object(n.jsx)(h.a,{item:!0,xs:12,lg:5,children:Object(n.jsx)(y.a,{fullWidth:!0,variant:"outlined",color:"primary",type:"submit",disabled:d,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})})})}var Xt=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(2)},headers:{marginBottom:e.spacing(2)},addVideo:{marginBottom:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"space-between"}}}));function Yt(){var e=Xt(),t=ge(),a=Object(b.f)();return Object(r.useEffect)((function(){return he(t)}),[]),Object(n.jsx)(Re.a,{maxWidth:"lg",children:Object(n.jsxs)(h.a,{container:!0,className:e.paper,spacing:4,children:[Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsx)(p.a,{variant:"h4",className:e.headers,color:"textPrimary",children:"\u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(n.jsx)(Kt,{})]}),Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsxs)("div",{className:e.addVideo,children:[Object(n.jsx)(p.a,{variant:"h4",color:"textPrimary",children:"\u0412\u0430\u0448\u0438 \u0432\u0438\u0434\u0435\u043e"}),Object(n.jsx)(y.a,{color:"primary",variant:"text",onClick:function(){return a.push("/new")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e"})]}),Object(n.jsx)(Jt,{})]})]})})}var Zt=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ea(){var e=new URLSearchParams(Object(b.g)().search),t=Object(k.b)().enqueueSnackbar,a=Object(b.f)(),c=Zt(),i=Object(r.useRef)(null),s=Object(r.useState)(!1),o=Object(O.a)(s,2),l=o[0],u=o[1];return Object(n.jsxs)(Re.a,{maxWidth:"sm",children:[Object(n.jsx)(Ot.a,{}),Object(n.jsxs)("div",{className:c.paper,children:[Object(n.jsx)(p.a,{component:"h1",variant:"h5",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(n.jsxs)("form",{className:c.form,noValidate:!0,children:[Object(n.jsx)(v.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"new-password",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"new-password",disabled:l,inputRef:i}),Object(n.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:c.submit,onClick:function(){u(!0);var n={id:e.get("id"),token:e.get("token"),newPassword:i.current.value};C.put("/reset",n).then((function(e){u(!1),t("\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d",{variant:"success"}),a.push("/auth")}),(function(e){t(e.response.data.error,{variant:"error"}),u(!1)}))},disabled:l,children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})}var ta=a(352),aa=a(176);function na(){var e=Object(b.h)().userId,t=Object(k.b)().enqueueSnackbar,a=ge(),c=fe(),i=Object(b.f)(),s=Object(r.useState)([]),o=Object(O.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)({id:0,name:"name",isAdmin:!1,img:"asd"}),d=Object(O.a)(j,2),m=d[0],x=d[1],f=Object(r.useState)(!0),v=Object(O.a)(f,2),w=v[0],S=v[1];function N(){S(!0),C.get("users/"+e).then((function(e){x(e.data.data),t("\u0414\u0430\u043d\u043d\u044b\u0435 \u044e\u0437\u0435\u0440\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b",{variant:"info"}),S(!1)}),(function(e){t(e.response.data.error,{variant:"error"})}))}Object(r.useEffect)((function(){return he(a)}),[]),Object(r.useEffect)((function(){C.get("videos/user/"+e).then((function(e){var a=[];Array.prototype.map.call(e.data.data,(function(e){a.push(e)})),u(a),t("\u0412\u0438\u0434\u0435\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b",{variant:"info"}),N()}),(function(e){t(e.response.data.error,{variant:"error"})}))}),[]);var P=Object(n.jsx)(Re.a,{maxWidth:"lg",style:{marginTop:40},children:Object(n.jsxs)(h.a,{container:!0,spacing:4,direction:"column",justify:"flex-start",alignItems:"center",children:[Object(n.jsxs)(h.a,{item:!0,container:!0,spacing:3,xs:12,justify:"flex-end",alignItems:"center",children:[Object(n.jsxs)(h.a,{item:!0,container:!0,spacing:3,xs:8,justify:"flex-start",alignItems:"center",children:[Object(n.jsx)(G,{src:m.img,name:m.name,style:{marginRight:25}}),Object(n.jsx)(p.a,{variant:"h6",color:"textPrimary",children:m.name})]}),!0===c.user.isAdmin&&Object(n.jsx)(h.a,{item:!0,xs:4,children:Object(n.jsxs)(ta.a,{variant:"outlined",size:"small",color:"secondary",children:[Object(n.jsx)(y.a,{onClick:function(){var a={userId:e,isAdmin:!m.isAdmin};console.log(a),C.put("users/admin",a).then((function(e){t("\u0420\u043e\u043b\u044c \u0438\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c",{variant:"info"}),N()}),(function(e){t(e.response.data.error,{variant:"error"})}))},children:m.isAdmin?"\u0423\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430":"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c"}),Object(n.jsx)(y.a,{onClick:function(){C.delete("users/"+e).then((function(a){t("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 id = "+e+" \u0443\u0434\u0430\u043b\u0435\u043d",{variant:"info"}),i.push("/")}),(function(e){t(e.response.data.error,{variant:"error"})}))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]})})]}),Object(n.jsx)(h.a,{item:!0,sx:12,children:Object(n.jsx)(g.a,{variant:"fullWidth"})}),Object(n.jsxs)(h.a,{item:!0,xs:12,container:!0,justify:"flex-start",children:[Object(n.jsx)(p.a,{variant:"h6",color:"textPrimary",children:"\u0412\u0438\u0434\u0435\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(n.jsx)(g.a,{variant:"fullWidth"})]}),Object(n.jsx)(g.a,{variant:"fullWidth",color:"#ffffff"}),Object(n.jsx)(h.a,{item:!0,xs:12,children:Object(n.jsx)(aa.a,{children:Object(n.jsx)(Pe,{handleNextPage:function(){},nextPage:!1,videosData:l})})})]})});return w?Object(n.jsx)(Y,{}):P}var ra=a(120),ca=a.n(ra),ia=Object(l.a)({palette:{primary:d.a,secondary:ca.a,type:"dark",text:{primary:"#ffffff",secondary:"#b8b8b8"}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}}},Le.ruRU),sa=Ee()({root:{marginTop:12}})(Re.a);function oa(){var e=""!==fe().token;return Object(n.jsxs)(b.c,{children:[Object(n.jsx)(b.a,{path:"/video/:videoToken",children:Object(n.jsx)(Se,{})}),Object(n.jsx)(b.a,{path:"/user/:userId",children:Object(n.jsx)(na,{})}),Object(n.jsx)(b.a,{exact:!0,path:"/",children:Object(n.jsx)(We,{})}),!e&&Object(n.jsx)(b.a,{path:"/auth",children:Object(n.jsx)(xt,{})}),!e&&Object(n.jsx)(b.a,{path:"/reset",children:Object(n.jsx)(ea,{})}),e&&Object(n.jsx)(b.a,{path:"/profile",children:Object(n.jsx)(Yt,{})}),e&&Object(n.jsx)(b.a,{path:"/new",children:Object(n.jsx)(St,{})}),Object(n.jsx)(b.a,{children:Object(n.jsx)(Nt,{})})]})}var la=function(){return Object(n.jsx)(ve,{children:Object(n.jsxs)(u.a,{theme:ia,children:[Object(n.jsx)(Ot.a,{}),Object(n.jsxs)(k.a,{maxSnack:3,children:[Object(n.jsx)(rt,{}),Object(n.jsx)(sa,{maxWidth:"lg",children:Object(n.jsx)(oa,{})})]})]})})};s.a.render(Object(n.jsx)(o.a,{children:Object(n.jsx)(la,{})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.a58e5b1f.chunk.js.map